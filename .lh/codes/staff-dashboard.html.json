{
    "sourceFile": "codes/staff-dashboard.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1771857565815,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1771857565815,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Staff Dashboard - Restaurant POS</title>\r\n\r\n    <!-- Bootstrap 5 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n    <!-- Font Awesome -->\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\r\n    <!-- Animate.css -->\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css\">\r\n\r\n    <!-- Custom CSS -->\r\n    <link rel=\"stylesheet\" href=\"style.css\">\r\n    <link rel=\"stylesheet\" href=\"staff.css\">\r\n    <script>\r\n        // Immediate Sidebar State Initialization\r\n        (function () {\r\n            const html = document.documentElement;\r\n            html.classList.add('initializing');\r\n\r\n            const sidebarState = localStorage.getItem('sidebarActive');\r\n            if (sidebarState === 'true' && window.innerWidth >= 992) {\r\n                html.classList.add('sidebar-active');\r\n            }\r\n\r\n            // Auth Guard (Staff version)\r\n            try {\r\n                const role = localStorage.getItem('loggedInRole');\r\n                if (role !== 'staff' && role !== 'cashier') {\r\n                    window.location.href = 'index.html';\r\n                }\r\n            } catch (e) {\r\n                window.location.href = 'index.html';\r\n            }\r\n        })();\r\n    </script>\r\n</head>\r\n\r\n<body>\r\n    <!-- Navigation Bar -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-black fixed-top shadow\">\r\n        <div class=\"container-fluid\">\r\n            <!-- Sidebar Toggle (Mobile) -->\r\n            <button class=\"sidebar-toggle mt-1 me-2\" id=\"sidebarToggle\">\r\n                <i class=\"fas fa-bars\"></i>\r\n            </button>\r\n\r\n            <!-- Mobile User Menu Toggle -->\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#headerNav\">\r\n                <span class=\"fas fa-ellipsis-v\"></span>\r\n            </button>\r\n\r\n            <!-- Nav Items -->\r\n            <div class=\"collapse navbar-collapse\" id=\"headerNav\">\r\n                <ul class=\"navbar-nav ms-auto\">\r\n                    <!-- User Dropdown (Preserved in Header) -->\r\n                    <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n                            <i class=\"fas fa-user-circle me-1\"></i>Staff Member\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end shadow border-0 animate__animated animate__fadeIn\">\r\n                            <li><a class=\"dropdown-item\" href=\"#\" data-page=\"account\"><i\r\n                                        class=\"fas fa-user-cog me-2 text-maroon\"></i>Account</a></li>\r\n                            <li><a class=\"dropdown-item\" href=\"#\" data-page=\"activity-log\"><i\r\n                                        class=\"fas fa-history me-2 text-maroon\"></i>Activity Log</a></li>\r\n                            <li>\r\n                                <hr class=\"dropdown-divider\">\r\n                            </li>\r\n                            <li><a class=\"dropdown-item text-danger\" href=\"#\" id=\"logoutBtn\"><i\r\n                                        class=\"fas fa-sign-out-alt me-2\"></i>Logout</a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <div class=\"dashboard-layout\">\r\n        <!-- Sidebar Navigation -->\r\n        <aside class=\"sidebar\" id=\"sidebar\">\r\n            <div class=\"sidebar-branding\">\r\n                <button class=\"sidebar-toggle in-sidebar\" id=\"sidebarToggleInternal\">\r\n                    <i class=\"fas fa-bars\"></i>\r\n                </button>\r\n                <a href=\"staff-dashboard.html\" class=\"sidebar-brand-group\">\r\n                    <img src=\"resources/ethans logo.jpg\" alt=\"Logo\">\r\n                    <span class=\"pos-label\">POS</span>\r\n                </a>\r\n            </div>\r\n            <div class=\"sidebar-nav\">\r\n                <div class=\"sidebar-section-title\">Operations</div>\r\n                <a href=\"#\" class=\"sidebar-link active\" data-page=\"menu\">\r\n                    <i class=\"fas fa-utensils\"></i>Menu Sales\r\n                </a>\r\n                <a href=\"#\" class=\"sidebar-link\" data-page=\"ingredients\">\r\n                    <i class=\"fas fa-boxes\"></i>Ingredients\r\n                </a>\r\n                <a href=\"#\" class=\"sidebar-link\" data-page=\"receipts\">\r\n                    <i class=\"fas fa-receipt\"></i>Receipts\r\n                </a>\r\n\r\n                <div class=\"sidebar-divider\"></div>\r\n                <div class=\"sidebar-section-title\">Account</div>\r\n                <a href=\"#\" class=\"sidebar-link\" data-page=\"account\">\r\n                    <i class=\"fas fa-user-cog\"></i>Account Settings\r\n                </a>\r\n                <a href=\"#\" class=\"sidebar-link\" data-page=\"activity-log\">\r\n                    <i class=\"fas fa-history\"></i>My Activity\r\n                </a>\r\n            </div>\r\n        </aside>\r\n\r\n        <!-- Main Content Area -->\r\n        <main class=\"main-content\">\r\n            <!-- Menu Sales Content (Default for Staff) -->\r\n            <div id=\"menu-content\" class=\"page-content\">\r\n                <div\r\n                    class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                    <h1 class=\"h2\"><i class=\"fas fa-utensils me-2 text-maroon\"></i>Menu Sales</h1>\r\n                    <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n                        <div class=\"btn-group me-2\">\r\n                            <button class=\"btn btn-sm btn-outline-maroon\" id=\"startNewSale\">\r\n                                <i class=\"fas fa-plus-circle\"></i> New Sale\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Search and Filter -->\r\n                <div class=\"row mb-4\">\r\n                    <div class=\"col-md-6 mb-3\">\r\n                        <div class=\"input-group\">\r\n                            <span class=\"input-group-text\"><i class=\"fas fa-search\"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"menuSearch\" placeholder=\"Search menu items...\">\r\n                            <button class=\"btn btn-outline-maroon\" id=\"clearSearch\">Clear</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-md-6 mb-3\">\r\n                        <select class=\"form-select\" id=\"menuCategoryFilter\">\r\n                            <option value=\"\">All Categories</option>\r\n                            <option value=\"Main Course\">Main Course</option>\r\n                            <option value=\"Appetizer\">Appetizer</option>\r\n                            <option value=\"Side Dish\">Side Dish</option>\r\n                            <option value=\"Dessert\">Dessert</option>\r\n                            <option value=\"Beverage\">Beverage</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Menu Items Grid -->\r\n                <div class=\"row\" id=\"menuItemsGrid\">\r\n                    <div class=\"col-12 text-center py-5\">\r\n                        <div class=\"loading-spinner\"></div>\r\n                        <p class=\"mt-2\">Loading menu items...</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Current Sale -->\r\n                <div class=\"row mt-4\">\r\n                    <div class=\"col-12\">\r\n                        <div class=\"card shadow\">\r\n                            <div class=\"card-header bg-black text-white\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-shopping-cart me-1\"></i>Current Sale\r\n                                    <span id=\"saleStatus\" class=\"badge bg-warning ms-2\">No active sale</span>\r\n                                </h6>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <div id=\"saleItems\">\r\n                                    <p class=\"text-muted text-center py-3\">No items added to sale yet. Select items\r\n                                        from the menu above.</p>\r\n                                </div>\r\n                                <div class=\"d-flex justify-content-between align-items-center mt-3\">\r\n                                    <div>\r\n                                        <strong>Total Items:</strong> <span id=\"totalItemsCount\">0</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <button class=\"btn btn-maroon\" id=\"recordSaleBtn\" disabled>\r\n                                            <i class=\"fas fa-check-circle me-1\"></i> Record Sale\r\n                                        </button>\r\n                                        <button class=\"btn btn-outline-secondary ms-2\" id=\"clearSaleBtn\">\r\n                                            <i class=\"fas fa-times-circle me-1\"></i> Clear\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Ingredients Content (Hidden by default) -->\r\n            <div id=\"ingredients-content\" class=\"page-content d-none\">\r\n                <div\r\n                    class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                    <h1 class=\"h2\"><i class=\"fas fa-boxes me-2 text-maroon\"></i>Ingredients</h1>\r\n                    <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n                        <div class=\"text-muted small\">\r\n                            <i class=\"fas fa-info-circle me-1\"></i>View & Update Only\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Search and Filter -->\r\n                <div class=\"row mb-4\">\r\n                    <div class=\"col-md-6 mb-3\">\r\n                        <div class=\"input-group\">\r\n                            <span class=\"input-group-text\"><i class=\"fas fa-search\"></i></span>\r\n                            <input type=\"text\" class=\"form-control\" id=\"ingredientSearch\"\r\n                                placeholder=\"Search ingredients...\">\r\n                            <button class=\"btn btn-outline-maroon\" id=\"clearIngredientSearch\">Clear</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-md-6 mb-3\">\r\n                        <select class=\"form-select\" id=\"ingredientCategoryFilter\">\r\n                            <option value=\"\">All Categories</option>\r\n                            <option value=\"Meat\">Meat</option>\r\n                            <option value=\"Vegetables\">Vegetables</option>\r\n                            <option value=\"Grains\">Grains</option>\r\n                            <option value=\"Spices\">Spices</option>\r\n                            <option value=\"Dairy\">Dairy</option>\r\n                            <option value=\"Other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Ingredients List -->\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <div class=\"card shadow\">\r\n                            <div\r\n                                class=\"card-header bg-black text-white d-flex justify-content-between align-items-center\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-list me-1\"></i>Ingredients List\r\n                                </h6>\r\n                                <div class=\"text-warning\">\r\n                                    <i class=\"fas fa-exclamation-circle me-1\"></i>\r\n                                    <span id=\"lowStockCount\">0</span> items low in stock\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table table-hover\" id=\"ingredientsListTable\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Ingredient</th>\r\n                                                <th>Category</th>\r\n                                                <th>Current Quantity</th>\r\n                                                <th>Unit</th>\r\n                                                <th>Status</th>\r\n                                                <th>Actions</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td colspan=\"6\" class=\"text-center\">Loading ingredients...</td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                                <div class=\"alert alert-info mt-3\">\r\n                                    <i class=\"fas fa-info-circle me-2\"></i>\r\n                                    <strong>Note:</strong> Staff can only increase (stock delivery) or decrease\r\n                                    (wastage/spoilage) ingredient quantities. Cannot add, edit details, or delete\r\n                                    ingredients.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Receipts Content (Hidden by default) -->\r\n            <div id=\"receipts-content\" class=\"page-content d-none\">\r\n                <div\r\n                    class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                    <h1 class=\"h2\"><i class=\"fas fa-receipt me-2 text-maroon\"></i>Receipts</h1>\r\n                    <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n                        <div class=\"text-muted small\">\r\n                            <i class=\"fas fa-info-circle me-1\"></i>Proof of order only (not payment)\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Receipt Preview -->\r\n                <div class=\"row\">\r\n                    <div class=\"col-lg-8\">\r\n                        <div class=\"card shadow mb-4\">\r\n                            <div class=\"card-header bg-black text-white\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-print me-1\"></i>Receipt Preview\r\n                                </h6>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <div class=\"receipt-container bg-light p-4 border\" id=\"receiptPreview\">\r\n                                    <div class=\"text-center py-5\">\r\n                                        <i class=\"fas fa-receipt fa-3x text-muted mb-3\"></i>\r\n                                        <p class=\"text-muted\">No receipt selected</p>\r\n                                        <p class=\"small\">Select a receipt from the list to preview</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"mt-3 d-flex justify-content-between\">\r\n                                    <button class=\"btn btn-maroon\" id=\"printReceiptBtn\" disabled>\r\n                                        <i class=\"fas fa-print me-1\"></i> Print Receipt\r\n                                    </button>\r\n                                    <button class=\"btn btn-green\" id=\"newSaleFromReceiptBtn\">\r\n                                        <i class=\"fas fa-plus-circle me-1\"></i> Start New Sale\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Recent Receipts -->\r\n                    <div class=\"col-lg-4\">\r\n                        <div class=\"card shadow\">\r\n                            <div class=\"card-header bg-black text-white\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-history me-1\"></i>Recent Receipts\r\n                                </h6>\r\n                            </div>\r\n                            <div class=\"card-body p-0\">\r\n                                <div class=\"list-group list-group-flush\" id=\"recentReceipts\">\r\n                                    <div class=\"list-group-item text-center py-4 text-muted\">\r\n                                        <i class=\"fas fa-receipt fa-2x mb-2\"></i>\r\n                                        <p>No receipts found</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Account Settings Content (Hidden by default) -->\r\n            <div id=\"account-content\" class=\"page-content d-none\">\r\n                <div\r\n                    class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                    <h1 class=\"h2\"><i class=\"fas fa-user-cog me-2 text-maroon\"></i>Account Settings</h1>\r\n                    <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n                        <div class=\"text-muted small\">\r\n                            <i class=\"fas fa-info-circle me-1\"></i>Personal access control only\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-lg-6\">\r\n                        <div class=\"card shadow mb-4\">\r\n                            <div class=\"card-header bg-black text-white\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-user me-1\"></i>Account Information\r\n                                </h6>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <form id=\"accountInfoForm\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Full Name</label>\r\n                                        <input type=\"text\" class=\"form-control\" id=\"accFullName\"\r\n                                            placeholder=\"Loading...\" required>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Username</label>\r\n                                        <input type=\"text\" class=\"form-control\" id=\"accUsername\"\r\n                                            placeholder=\"Loading...\" required readonly disabled>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Current Role</label>\r\n                                        <input type=\"text\" class=\"form-control\" id=\"currentRole\" value=\"Staff\" readonly>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Request Role Change To</label>\r\n                                        <select class=\"form-select\" id=\"requestRoleChange\">\r\n                                            <option value=\"\">No Change</option>\r\n                                            <option value=\"Senior Staff\">Senior Staff</option>\r\n                                            <option value=\"Cashier\">Cashier</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Account Status</label>\r\n                                        <input type=\"text\" class=\"form-control\" id=\"accountStatus\" value=\"Active\"\r\n                                            readonly>\r\n                                    </div>\r\n                                    <button type=\"submit\" class=\"btn btn-maroon\" id=\"saveAccountInfoBtn\">\r\n                                        <i class=\"fas fa-save me-1\"></i> Save Changes\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-lg-6\">\r\n                        <div class=\"card shadow mb-4\">\r\n                            <div class=\"card-header bg-black text-white\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-lock me-1\"></i>Change Password\r\n                                </h6>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <form id=\"changePasswordForm\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"currentPassword\" class=\"form-label\">Current Password</label>\r\n                                        <input type=\"password\" class=\"form-control\" id=\"currentPassword\" required>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"newPassword\" class=\"form-label\">New Password</label>\r\n                                        <input type=\"password\" class=\"form-control\" id=\"newPassword\" required>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <label for=\"confirmNewPassword\" class=\"form-label\">Confirm New\r\n                                            Password</label>\r\n                                        <input type=\"password\" class=\"form-control\" id=\"confirmNewPassword\" required>\r\n                                    </div>\r\n                                    <button type=\"submit\" class=\"btn btn-maroon\">\r\n                                        <i class=\"fas fa-key me-1\"></i> Change Password\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Logout Card -->\r\n                        <div class=\"card shadow\">\r\n                            <div class=\"card-body text-center\">\r\n                                <button class=\"btn btn-outline-danger\" id=\"logoutBtnAccount\">\r\n                                    <i class=\"fas fa-sign-out-alt me-1\"></i> Logout\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Activity Log Content (Hidden by default) -->\r\n            <div id=\"activity-log-content\" class=\"page-content d-none\">\r\n                <div\r\n                    class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                    <h1 class=\"h2\"><i class=\"fas fa-history me-2 text-maroon\"></i>Activity Log</h1>\r\n                    <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n                        <div class=\"text-muted small\">\r\n                            <i class=\"fas fa-info-circle me-1\"></i>Read-only â€¢ Own activity only\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <div class=\"card shadow\">\r\n                            <div\r\n                                class=\"card-header bg-black text-white d-flex justify-content-between align-items-center\">\r\n                                <h6 class=\"m-0 font-weight-bold\">\r\n                                    <i class=\"fas fa-list-alt me-1\"></i>My Activity Log\r\n                                </h6>\r\n                                <div class=\"text-muted small\">\r\n                                    <i class=\"fas fa-user me-1\"></i>Showing actions by: <span\r\n                                        id=\"profActivityName\">Staff Member</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                <div class=\"table-responsive\">\r\n                                    <table class=\"table table-hover\" id=\"activityLogTable\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Date & Time</th>\r\n                                                <th>Action Performed</th>\r\n                                                <th>Reference</th>\r\n                                                <th>Status</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <td colspan=\"4\" class=\"text-center\">Loading activity log...</td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                                <div class=\"alert alert-info mt-3\">\r\n                                    <i class=\"fas fa-info-circle me-2\"></i>\r\n                                    <strong>Note:</strong> This log shows ONLY actions done by you (the logged-in\r\n                                    staff). You cannot see other staff activity, owner/admin actions, system\r\n                                    configuration logs, or edit/delete logs.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    </div>\r\n\r\n    <!-- Modals -->\r\n    <div class=\"modal fade\" id=\"increaseQuantityModal\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-green text-white\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-plus-circle me-2\"></i>Increase Quantity\r\n                    </h5>\r\n                    <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form id=\"increaseQuantityForm\">\r\n                        <input type=\"hidden\" id=\"increaseIngredientId\">\r\n                        <div class=\"mb-3\">\r\n                            <label class=\"form-label\">Ingredient</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"increaseIngredientName\" readonly>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-6 mb-3\">\r\n                                <label for=\"increaseAmount\" class=\"form-label\">Amount to Add</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"increaseAmount\" min=\"1\" step=\"0.01\"\r\n                                    required>\r\n                            </div>\r\n                            <div class=\"col-md-6 mb-3\">\r\n                                <label class=\"form-label\">Unit</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"increaseUnit\" readonly>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"increaseReason\" class=\"form-label\">Reason (Optional)</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"increaseReason\"\r\n                                placeholder=\"e.g., Stock delivery\">\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-green\" id=\"confirmIncrease\">Update Quantity</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"decreaseQuantityModal\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-warning text-dark\">\r\n                    <h5 class=\"modal-title\">\r\n                        <i class=\"fas fa-minus-circle me-2\"></i>Decrease Quantity\r\n                    </h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form id=\"decreaseQuantityForm\">\r\n                        <input type=\"hidden\" id=\"decreaseIngredientId\">\r\n                        <div class=\"mb-3\">\r\n                            <label class=\"form-label\">Ingredient</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"decreaseIngredientName\" readonly>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-md-6 mb-3\">\r\n                                <label for=\"decreaseAmount\" class=\"form-label\">Amount to Subtract</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"decreaseAmount\" min=\"0.01\" step=\"0.01\"\r\n                                    required>\r\n                            </div>\r\n                            <div class=\"col-md-6 mb-3\">\r\n                                <label class=\"form-label\">Unit</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"decreaseUnit\" readonly>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"decreaseReason\" class=\"form-label\">Reason</label>\r\n                            <select class=\"form-select\" id=\"decreaseReason\" required>\r\n                                <option value=\"\">Select reason</option>\r\n                                <option value=\"wastage\">Wastage</option>\r\n                                <option value=\"spoilage\">Spoilage</option>\r\n                                <option value=\"damaged\">Damaged</option>\r\n                                <option value=\"other\">Other</option>\r\n                            </select>\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"decreaseNotes\" class=\"form-label\">Notes (Optional)</label>\r\n                            <textarea class=\"form-control\" id=\"decreaseNotes\" rows=\"2\"></textarea>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-warning\" id=\"confirmDecrease\">Update Quantity</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Notification Modal -->\r\n    <div class=\"modal fade\" id=\"notificationModal\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\" id=\"notificationModalHeader\">\r\n                    <h5 class=\"modal-title\" id=\"notificationModalTitle\"></h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                </div>\r\n                <div class=\"modal-body\" id=\"notificationModalBody\">\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" id=\"notificationModalConfirm\"\r\n                        style=\"display: none;\">Confirm</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Bootstrap 5 JS Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- jQuery for AJAX -->\r\n    <script src=\"https://code.jquery.com/jquery-3.6.4.min.js\"></script>\r\n    <!-- SweetAlert2 for nicer alerts and confirmations -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n\r\n    <!-- Custom JS -->\r\n    <script src=\"main.js\"></script>\r\n    <script src=\"staff.js\"></script>\r\n\r\n    <script>\r\n        // Initialize on page load\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            // Set Menu Sales as active page by default\r\n            updateActivePage('menu');\r\n\r\n            // Load menu items\r\n            loadMenuItems();\r\n\r\n            // Navigation handling\r\n            document.querySelectorAll('[data-page]').forEach(link => {\r\n                link.addEventListener('click', function (e) {\r\n                    e.preventDefault();\r\n                    const page = this.getAttribute('data-page');\r\n                    updateActivePage(page);\r\n\r\n                    // Auto-close sidebar on mobile after selection\r\n                    if (window.innerWidth < 992) {\r\n                        const layout = document.querySelector('.dashboard-layout');\r\n                        if (layout) layout.classList.remove('sidebar-active');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Logout buttons are now handled in staff.js with proper activity logging\r\n\r\n            // Start new sale from receipts logic is handled in staff.js\r\n\r\n            // Search and filter for menu\r\n            document.getElementById('menuSearch').addEventListener('input', function () {\r\n                filterMenuItems();\r\n            });\r\n\r\n            document.getElementById('menuCategoryFilter').addEventListener('change', function () {\r\n                filterMenuItems();\r\n            });\r\n\r\n            document.getElementById('clearSearch').addEventListener('click', function () {\r\n                document.getElementById('menuSearch').value = '';\r\n                filterMenuItems();\r\n            });\r\n\r\n            // Search and filter for ingredients\r\n            document.getElementById('ingredientSearch').addEventListener('input', function () {\r\n                filterIngredients();\r\n            });\r\n\r\n            document.getElementById('ingredientCategoryFilter').addEventListener('change', function () {\r\n                filterIngredients();\r\n            });\r\n\r\n            document.getElementById('clearIngredientSearch').addEventListener('click', function () {\r\n                document.getElementById('ingredientSearch').value = '';\r\n                document.getElementById('ingredientCategoryFilter').value = '';\r\n                filterIngredients();\r\n            });\r\n\r\n            // Account info form\r\n            document.getElementById('saveAccountInfoBtn').addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                saveAccountInfo();\r\n            });\r\n        });\r\n\r\n        function updateActivePage(page) {\r\n            // Hide all page contents\r\n            document.querySelectorAll('.page-content').forEach(content => {\r\n                content.classList.add('d-none');\r\n                content.classList.remove('animate__fadeIn');\r\n            });\r\n\r\n            // Show selected page content\r\n            const pageContent = document.getElementById(`${page}-content`);\r\n            if (pageContent) {\r\n                pageContent.classList.remove('d-none');\r\n                pageContent.classList.add('animate__animated', 'animate__fadeIn');\r\n\r\n                // Load page-specific data\r\n                switch (page) {\r\n                    case 'dashboard':\r\n                        loadDashboardData();\r\n                        break;\r\n                    case 'menu':\r\n                        loadMenuItems();\r\n                        break;\r\n                    case 'ingredients':\r\n                        loadIngredients();\r\n                        break;\r\n                    case 'receipts':\r\n                        loadRecentReceipts();\r\n                        break;\r\n                    case 'account':\r\n                        loadAccountInfo();\r\n                        break;\r\n                    case 'activity-log':\r\n                        loadActivityLog();\r\n                        break;\r\n                }\r\n            }\r\n\r\n            // Update active state for sidebar links\r\n            document.querySelectorAll('.sidebar-link').forEach(el => {\r\n                el.classList.remove('active');\r\n            });\r\n            const activeSidebarLink = document.querySelector(`.sidebar-link[data-page=\"${page}\"]`);\r\n            if (activeSidebarLink) {\r\n                activeSidebarLink.classList.add('active');\r\n            }\r\n\r\n            // Update active nav link (dropdown items)\r\n            document.querySelectorAll('.nav-link, .dropdown-item').forEach(link => {\r\n                link.classList.remove('active');\r\n            });\r\n\r\n            document.querySelectorAll(`[data-page=\"${page}\"]`).forEach(link => {\r\n                link.classList.add('active');\r\n            });\r\n        }\r\n\r\n        function loadDashboardData() {\r\n            // Simulate AJAX loading\r\n            setTimeout(() => {\r\n                // Update info boxes\r\n                document.getElementById('totalOrders').textContent = '24';\r\n                document.getElementById('totalSales').textContent = '18';\r\n                document.getElementById('lowStock').textContent = '3';\r\n                document.getElementById('availableIngredients').textContent = '42';\r\n\r\n                // Populate ingredient table\r\n                const ingredientData = [\r\n                    { name: 'Beef', category: 'Meat', quantity: '15 kg', status: 'Normal' },\r\n                    { name: 'Chicken', category: 'Meat', quantity: '8 kg', status: 'Low' },\r\n                    { name: 'Rice', category: 'Grains', quantity: '25 kg', status: 'Normal' },\r\n                    { name: 'Tomatoes', category: 'Vegetables', quantity: '5 kg', status: 'Normal' },\r\n                    { name: 'Onions', category: 'Vegetables', quantity: '3 kg', status: 'Low' },\r\n                    { name: 'Garlic', category: 'Spices', quantity: '2 kg', status: 'Normal' }\r\n                ];\r\n\r\n                const ingredientTable = document.getElementById('ingredientTable').getElementsByTagName('tbody')[0];\r\n                ingredientTable.innerHTML = '';\r\n\r\n                ingredientData.forEach(item => {\r\n                    const row = ingredientTable.insertRow();\r\n                    row.innerHTML = `\r\n                        <td>${item.name}</td>\r\n                        <td><span class=\"badge bg-secondary\">${item.category}</span></td>\r\n                        <td>${item.quantity}</td>\r\n                        <td><span class=\"badge ${item.status === 'Normal' ? 'bg-success' : 'bg-warning'}\">${item.status}</span></td>\r\n                    `;\r\n                });\r\n\r\n                // Populate best selling table\r\n                const bestSellingData = [\r\n                    { item: 'Beef Steak', quantity: 12 },\r\n                    { item: 'Chicken Curry', quantity: 10 },\r\n                    { item: 'Vegetable Salad', quantity: 8 },\r\n                    { item: 'Garlic Bread', quantity: 6 },\r\n                    { item: 'French Fries', quantity: 5 }\r\n                ];\r\n\r\n                const bestSellingTable = document.getElementById('bestSellingTable').getElementsByTagName('tbody')[0];\r\n                bestSellingTable.innerHTML = '';\r\n\r\n                bestSellingData.forEach(item => {\r\n                    const row = bestSellingTable.insertRow();\r\n                    row.innerHTML = `\r\n                        <td>${item.item}</td>\r\n                        <td><span class=\"badge bg-maroon\">${item.quantity}</span></td>\r\n                    `;\r\n                });\r\n            }, 500);\r\n        }\r\n\r\n        function loadAccountInfo() {\r\n            // Simulate loading account info\r\n            setTimeout(() => {\r\n                // In real app, this would come from server\r\n                const accountInfo = {\r\n                    fullName: 'John Doe',\r\n                    username: 'johndoe',\r\n                    role: 'Staff',\r\n                    status: 'Active'\r\n                };\r\n\r\n                document.getElementById('staffFullName').value = accountInfo.fullName;\r\n                document.getElementById('staffUsername').value = accountInfo.username;\r\n                document.getElementById('currentRole').value = accountInfo.role;\r\n                document.getElementById('accountStatus').value = accountInfo.status;\r\n            }, 300);\r\n        }\r\n\r\n        function saveAccountInfo() {\r\n            const fullName = document.getElementById('staffFullName').value;\r\n            const username = document.getElementById('staffUsername').value;\r\n            const roleChange = document.getElementById('requestRoleChange').value;\r\n\r\n            if (!fullName || !username) {\r\n                showModalNotification('Please fill in all required fields', 'warning');\r\n                return;\r\n            }\r\n\r\n            // Simulate saving\r\n            setTimeout(() => {\r\n                if (roleChange) {\r\n                    showModalNotification('Account information saved. Role change request submitted for approval.', 'success');\r\n                } else {\r\n                    showModalNotification('Account information saved successfully', 'success');\r\n                }\r\n            }, 1000);\r\n        }\r\n\r\n        function filterMenuItems() {\r\n            const searchTerm = document.getElementById('menuSearch').value.toLowerCase();\r\n            const categoryFilter = document.getElementById('menuCategoryFilter').value;\r\n\r\n            // This would filter the actual menu items in a real app\r\n            console.log('Filtering menu items:', { searchTerm, categoryFilter });\r\n        }\r\n\r\n        function filterIngredients() {\r\n            const searchTerm = document.getElementById('ingredientSearch').value.toLowerCase();\r\n            const categoryFilter = document.getElementById('ingredientCategoryFilter').value;\r\n\r\n            // This would filter the actual ingredients in a real app\r\n            console.log('Filtering ingredients:', { searchTerm, categoryFilter });\r\n        }\r\n\r\n        function showModalNotification(message, type = 'info', title = 'Notification') {\r\n            const modalHeader = document.getElementById('notificationModalHeader');\r\n            const modalTitle = document.getElementById('notificationModalTitle');\r\n            const modalBody = document.getElementById('notificationModalBody');\r\n\r\n            // Set modal color based on type\r\n            let headerClass = 'bg-primary text-white';\r\n            switch (type) {\r\n                case 'success':\r\n                    headerClass = 'bg-success text-white';\r\n                    break;\r\n                case 'warning':\r\n                    headerClass = 'bg-warning text-dark';\r\n                    break;\r\n                case 'danger':\r\n                    headerClass = 'bg-danger text-white';\r\n                    break;\r\n                case 'info':\r\n                    headerClass = 'bg-info text-white';\r\n                    break;\r\n            }\r\n\r\n            modalHeader.className = `modal-header ${headerClass}`;\r\n            modalTitle.textContent = title;\r\n            modalBody.textContent = message;\r\n\r\n            // Hide confirm button for regular notifications\r\n            document.getElementById('notificationModalConfirm').style.display = 'none';\r\n\r\n            // Show modal\r\n            const modal = new bootstrap.Modal(document.getElementById('notificationModal'));\r\n            modal.show();\r\n        }\r\n    </script>\r\n</body>\r\n\r\n</html>"
        }
    ]
}