{
    "sourceFile": "codes/middle.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1771488046855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1771488317386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,58 +1,62 @@\n const API_URL = \"http://localhost/path_to_api/app.php\";\r\n \r\n-export const rolesDB = {\r\n-\tadd: async (data) => {\r\n-\t\ttry {\r\n-\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\tmethod: \"POST\",\r\n-\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\tbody: JSON.stringify(data)\r\n-\t\t\t});\r\n-\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\treturn await res.json();\r\n-\t\t} catch (err) {\r\n-\t\t\tconsole.error(\"Add failed:\", err);\r\n-\t\t\treturn { error: err.message };\r\n+export function createDB(table) {\r\n+\treturn {\r\n+\t\tadd: async (data) => {\r\n+\t\t\ttry {\r\n+\t\t\t\tconst res = await fetch(API_URL, {\r\n+\t\t\t\t\tmethod: \"POST\",\r\n+\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n+\t\t\t\t\tbody: JSON.stringify({ ...data, table })\r\n+\t\t\t\t});\r\n+\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\treturn await res.json();\r\n+\t\t\t} catch (err) {\r\n+\t\t\t\tconsole.error(`Add failed [${table}]:`, err);\r\n+\t\t\t\treturn { error: err.message };\r\n+\t\t\t}\r\n+\t\t},\r\n+\t\tshow: async (filters = {}) => {\r\n+\t\t\ttry {\r\n+\t\t\t\tconst params = new URLSearchParams({ ...filters, table }).toString();\r\n+\t\t\t\tconst res = await fetch(`${API_URL}?${params}`);\r\n+\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\treturn await res.json();\r\n+\t\t\t} catch (err) {\r\n+\t\t\t\tconsole.error(`Show failed [${table}]:`, err);\r\n+\t\t\t\treturn [];\r\n+\t\t\t}\r\n+\t\t},\r\n+\t\tedit: async (data) => {\r\n+\t\t\ttry {\r\n+\t\t\t\tif (!data.id && !data.key) throw new Error(\"Missing id/key for update\");\r\n+\t\t\t\tconst res = await fetch(API_URL, {\r\n+\t\t\t\t\tmethod: \"PUT\",\r\n+\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n+\t\t\t\t\tbody: JSON.stringify({ ...data, table })\r\n+\t\t\t\t});\r\n+\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\treturn await res.json();\r\n+\t\t\t} catch (err) {\r\n+\t\t\t\tconsole.error(`Edit failed [${table}]:`, err);\r\n+\t\t\t\treturn { error: err.message };\r\n+\t\t\t}\r\n+\t\t},\r\n+\t\tdelete: async (idOrKey) => {\r\n+\t\t\ttry {\r\n+\t\t\t\tconst keyName = typeof idOrKey === 'object' ? Object.keys(idOrKey)[0] : (table === 'system_settings' ? 'key' : 'id');\r\n+\t\t\t\tconst keyValue = typeof idOrKey === 'object' ? Object.values(idOrKey)[0] : idOrKey;\r\n+\t\t\t\tconst res = await fetch(API_URL, {\r\n+\t\t\t\t\tmethod: \"DELETE\",\r\n+\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n+\t\t\t\t\tbody: JSON.stringify({ [keyName]: keyValue, table })\r\n+\t\t\t\t});\r\n+\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\treturn await res.json();\r\n+\t\t\t} catch (err) {\r\n+\t\t\t\tconsole.error(`Delete failed [${table}]:`, err);\r\n+\t\t\t\treturn { error: err.message };\r\n+\t\t\t}\r\n \t\t}\r\n-\t},\r\n-\tshow: async (filters = {}) => {\r\n-\t\ttry {\r\n-\t\t\tconst query = new URLSearchParams(filters).toString();\r\n-\t\t\tconst res = await fetch(query ? `${API_URL}?${query}` : API_URL);\r\n-\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\treturn await res.json();\r\n-\t\t} catch (err) {\r\n-\t\t\tconsole.error(\"Show failed:\", err);\r\n-\t\t\treturn [];\r\n-\t\t}\r\n-\t},\r\n-\tedit: async (data) => {\r\n-\t\ttry {\r\n-\t\t\tif (!data.id) throw new Error(\"Missing id for update\");\r\n-\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\tmethod: \"PUT\",\r\n-\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\tbody: JSON.stringify(data)\r\n-\t\t\t});\r\n-\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\treturn await res.json();\r\n-\t\t} catch (err) {\r\n-\t\t\tconsole.error(\"Edit failed:\", err);\r\n-\t\t\treturn { error: err.message };\r\n-\t\t}\r\n-\t},\r\n-\tdelete: async (id) => {\r\n-\t\ttry {\r\n-\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\tmethod: \"DELETE\",\r\n-\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\tbody: JSON.stringify({ id })\r\n-\t\t\t});\r\n-\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\treturn await res.json();\r\n-\t\t} catch (err) {\r\n-\t\t\tconsole.error(\"Delete failed:\", err);\r\n-\t\t\treturn { error: err.message };\r\n-\t\t}\r\n-\t}\r\n-};\r\n+\t};\r\n+}\r\n"
                },
                {
                    "date": 1771488468409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,4 +59,23 @@\n \t\t\t}\r\n \t\t}\r\n \t};\r\n }\r\n+\r\n+// Ready-to-use DB objects for each table\r\n+export const rolesDB = createDB('roles');\r\n+export const usersDB = createDB('users');\r\n+export const accountRequestsDB = createDB('account_requests');\r\n+export const menuCategoriesDB = createDB('menu_categories');\r\n+export const menuItemsDB = createDB('menu_items');\r\n+export const ingredientCategoriesDB = createDB('ingredient_categories');\r\n+export const unitsDB = createDB('units');\r\n+export const ingredientsDB = createDB('ingredients');\r\n+export const recipesDB = createDB('recipes');\r\n+export const salesDB = createDB('sales');\r\n+export const saleItemsDB = createDB('sale_items');\r\n+export const inventoryTransactionsDB = createDB('inventory_transactions');\r\n+export const activityLogsDB = createDB('activity_logs');\r\n+export const requestsTblDB = createDB('requests_tbl');\r\n+export const backupsDB = createDB('backups');\r\n+export const systemSettingsDB = createDB('system_settings');\r\n+export const temporaryAccountLogDB = createDB('temporary_account_log');\r\n"
                },
                {
                    "date": 1771489113343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-const API_URL = \"http://localhost/path_to_api/app.php\";\r\n+const API_URL = \"http://localhost/php/app.php\";\r\n \r\n export function createDB(table) {\r\n \treturn {\r\n \t\tadd: async (data) => {\r\n"
                },
                {
                    "date": 1771490442132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,65 +1,82 @@\n-const API_URL = \"http://localhost/php/app.php\";\r\n+const API_URL = \"http://localhost/Ethans%20Cafe/codes/php/app.php\";\r\n \r\n export function createDB(table) {\r\n-\treturn {\r\n-\t\tadd: async (data) => {\r\n-\t\t\ttry {\r\n-\t\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\t\tmethod: \"POST\",\r\n-\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\t\tbody: JSON.stringify({ ...data, table })\r\n-\t\t\t\t});\r\n-\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\t\treturn await res.json();\r\n-\t\t\t} catch (err) {\r\n-\t\t\t\tconsole.error(`Add failed [${table}]:`, err);\r\n-\t\t\t\treturn { error: err.message };\r\n-\t\t\t}\r\n-\t\t},\r\n-\t\tshow: async (filters = {}) => {\r\n-\t\t\ttry {\r\n-\t\t\t\tconst params = new URLSearchParams({ ...filters, table }).toString();\r\n-\t\t\t\tconst res = await fetch(`${API_URL}?${params}`);\r\n-\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\t\treturn await res.json();\r\n-\t\t\t} catch (err) {\r\n-\t\t\t\tconsole.error(`Show failed [${table}]:`, err);\r\n-\t\t\t\treturn [];\r\n-\t\t\t}\r\n-\t\t},\r\n-\t\tedit: async (data) => {\r\n-\t\t\ttry {\r\n-\t\t\t\tif (!data.id && !data.key) throw new Error(\"Missing id/key for update\");\r\n-\t\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\t\tmethod: \"PUT\",\r\n-\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\t\tbody: JSON.stringify({ ...data, table })\r\n-\t\t\t\t});\r\n-\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\t\treturn await res.json();\r\n-\t\t\t} catch (err) {\r\n-\t\t\t\tconsole.error(`Edit failed [${table}]:`, err);\r\n-\t\t\t\treturn { error: err.message };\r\n-\t\t\t}\r\n-\t\t},\r\n-\t\tdelete: async (idOrKey) => {\r\n-\t\t\ttry {\r\n-\t\t\t\tconst keyName = typeof idOrKey === 'object' ? Object.keys(idOrKey)[0] : (table === 'system_settings' ? 'key' : 'id');\r\n-\t\t\t\tconst keyValue = typeof idOrKey === 'object' ? Object.values(idOrKey)[0] : idOrKey;\r\n-\t\t\t\tconst res = await fetch(API_URL, {\r\n-\t\t\t\t\tmethod: \"DELETE\",\r\n-\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n-\t\t\t\t\tbody: JSON.stringify({ [keyName]: keyValue, table })\r\n-\t\t\t\t});\r\n-\t\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t\t\t\treturn await res.json();\r\n-\t\t\t} catch (err) {\r\n-\t\t\t\tconsole.error(`Delete failed [${table}]:`, err);\r\n-\t\t\t\treturn { error: err.message };\r\n-\t\t\t}\r\n-\t\t}\r\n-\t};\r\n+\t return {\r\n+\t add: async (data) => {\r\n+\t try {\r\n+\t const res = await fetch(API_URL, {\r\n+\t method: \"POST\",\r\n+\t headers: {\r\n+\t\t \"Content-Type\": \"application/json\",\r\n+\t\t \"Accept\": \"application/json\",\r\n+\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t },\r\n+\t body: JSON.stringify({ ...data, table })\r\n+\t });\r\n+\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t return await res.json();\r\n+\t } catch (err) {\r\n+\t console.error(`Add failed [${table}]:`, err);\r\n+\t return { error: err.message };\r\n+\t }\r\n+\t },\r\n+\t show: async (filters = {}) => {\r\n+\t try {\r\n+\t const params = new URLSearchParams({ ...filters, table }).toString();\r\n+\t const res = await fetch(`${API_URL}?${params}`, {\r\n+\t\t headers: {\r\n+\t\t\t \"Accept\": \"application/json\",\r\n+\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t }\r\n+\t });\r\n+\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t return await res.json();\r\n+\t } catch (err) {\r\n+\t console.error(`Show failed [${table}]:`, err);\r\n+\t return [];\r\n+\t }\r\n+\t },\r\n+\t edit: async (data) => {\r\n+\t try {\r\n+\t if (!data.id && !data.key) throw new Error(\"Missing id/key for update\");\r\n+\t const res = await fetch(API_URL, {\r\n+\t method: \"PUT\",\r\n+\t headers: {\r\n+\t\t \"Content-Type\": \"application/json\",\r\n+\t\t \"Accept\": \"application/json\",\r\n+\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t },\r\n+\t body: JSON.stringify({ ...data, table })\r\n+\t });\r\n+\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t return await res.json();\r\n+\t } catch (err) {\r\n+\t console.error(`Edit failed [${table}]:`, err);\r\n+\t return { error: err.message };\r\n+\t }\r\n+\t },\r\n+\t delete: async (idOrKey) => {\r\n+\t try {\r\n+\t const keyName = typeof idOrKey === 'object' ? Object.keys(idOrKey)[0] : (table === 'system_settings' ? 'key' : 'id');\r\n+\t const keyValue = typeof idOrKey === 'object' ? Object.values(idOrKey)[0] : idOrKey;\r\n+\t const res = await fetch(API_URL, {\r\n+\t method: \"DELETE\",\r\n+\t headers: {\r\n+\t\t \"Content-Type\": \"application/json\",\r\n+\t\t \"Accept\": \"application/json\",\r\n+\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t },\r\n+\t body: JSON.stringify({ [keyName]: keyValue, table })\r\n+\t });\r\n+\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t return await res.json();\r\n+\t } catch (err) {\r\n+\t console.error(`Delete failed [${table}]:`, err);\r\n+\t return { error: err.message };\r\n+\t }\r\n+\t }\r\n+\t };\r\n }\r\n \r\n // Ready-to-use DB objects for each table\r\n export const rolesDB = createDB('roles');\r\n"
                },
                {
                    "date": 1771490545796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,80 +2,120 @@\n \r\n export function createDB(table) {\r\n \t return {\r\n \t add: async (data) => {\r\n-\t try {\r\n-\t const res = await fetch(API_URL, {\r\n-\t method: \"POST\",\r\n-\t headers: {\r\n-\t\t \"Content-Type\": \"application/json\",\r\n-\t\t \"Accept\": \"application/json\",\r\n-\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t console.log(`[usersDB.add] Sending:`, { ...data, table });\r\n+\t\t try {\r\n+\t\t\t const res = await fetch(API_URL, {\r\n+\t\t\t\t method: \"POST\",\r\n+\t\t\t\t headers: {\r\n+\t\t\t\t\t \"Content-Type\": \"application/json\",\r\n+\t\t\t\t\t \"Accept\": \"application/json\",\r\n+\t\t\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t\t\t },\r\n+\t\t\t\t body: JSON.stringify({ ...data, table })\r\n+\t\t\t });\r\n+\t\t\t console.log(`[usersDB.add] Response status:`, res.status);\r\n+\t\t\t const text = await res.text();\r\n+\t\t\t try {\r\n+\t\t\t\t const json = JSON.parse(text);\r\n+\t\t\t\t console.log(`[usersDB.add] Response JSON:`, json);\r\n+\t\t\t\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\t return json;\r\n+\t\t\t } catch (parseErr) {\r\n+\t\t\t\t console.error(`[usersDB.add] Response not JSON:`, text);\r\n+\t\t\t\t throw parseErr;\r\n+\t\t\t }\r\n+\t\t } catch (err) {\r\n+\t\t\t console.error(`Add failed [${table}]:`, err);\r\n+\t\t\t return { error: err.message };\r\n+\t\t }\r\n \t },\r\n-\t body: JSON.stringify({ ...data, table })\r\n-\t });\r\n-\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t return await res.json();\r\n-\t } catch (err) {\r\n-\t console.error(`Add failed [${table}]:`, err);\r\n-\t return { error: err.message };\r\n-\t }\r\n-\t },\r\n \t show: async (filters = {}) => {\r\n-\t try {\r\n-\t const params = new URLSearchParams({ ...filters, table }).toString();\r\n-\t const res = await fetch(`${API_URL}?${params}`, {\r\n-\t\t headers: {\r\n-\t\t\t \"Accept\": \"application/json\",\r\n-\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t console.log(`[${table}DB.show] Filters:`, filters);\r\n+\t\t try {\r\n+\t\t\t const params = new URLSearchParams({ ...filters, table }).toString();\r\n+\t\t\t const res = await fetch(`${API_URL}?${params}`, {\r\n+\t\t\t\t headers: {\r\n+\t\t\t\t\t \"Accept\": \"application/json\",\r\n+\t\t\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t\t\t }\r\n+\t\t\t });\r\n+\t\t\t console.log(`[${table}DB.show] Response status:`, res.status);\r\n+\t\t\t const text = await res.text();\r\n+\t\t\t try {\r\n+\t\t\t\t const json = JSON.parse(text);\r\n+\t\t\t\t console.log(`[${table}DB.show] Response JSON:`, json);\r\n+\t\t\t\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\t return json;\r\n+\t\t\t } catch (parseErr) {\r\n+\t\t\t\t console.error(`[${table}DB.show] Response not JSON:`, text);\r\n+\t\t\t\t throw parseErr;\r\n+\t\t\t }\r\n+\t\t } catch (err) {\r\n+\t\t\t console.error(`Show failed [${table}]:`, err);\r\n+\t\t\t return [];\r\n \t\t }\r\n-\t });\r\n-\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t return await res.json();\r\n-\t } catch (err) {\r\n-\t console.error(`Show failed [${table}]:`, err);\r\n-\t return [];\r\n-\t }\r\n \t },\r\n \t edit: async (data) => {\r\n-\t try {\r\n-\t if (!data.id && !data.key) throw new Error(\"Missing id/key for update\");\r\n-\t const res = await fetch(API_URL, {\r\n-\t method: \"PUT\",\r\n-\t headers: {\r\n-\t\t \"Content-Type\": \"application/json\",\r\n-\t\t \"Accept\": \"application/json\",\r\n-\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t console.log(`[${table}DB.edit] Data:`, data);\r\n+\t\t try {\r\n+\t\t\t if (!data.id && !data.key) throw new Error(\"Missing id/key for update\");\r\n+\t\t\t const res = await fetch(API_URL, {\r\n+\t\t\t\t method: \"PUT\",\r\n+\t\t\t\t headers: {\r\n+\t\t\t\t\t \"Content-Type\": \"application/json\",\r\n+\t\t\t\t\t \"Accept\": \"application/json\",\r\n+\t\t\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t\t\t },\r\n+\t\t\t\t body: JSON.stringify({ ...data, table })\r\n+\t\t\t });\r\n+\t\t\t console.log(`[${table}DB.edit] Response status:`, res.status);\r\n+\t\t\t const text = await res.text();\r\n+\t\t\t try {\r\n+\t\t\t\t const json = JSON.parse(text);\r\n+\t\t\t\t console.log(`[${table}DB.edit] Response JSON:`, json);\r\n+\t\t\t\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\t return json;\r\n+\t\t\t } catch (parseErr) {\r\n+\t\t\t\t console.error(`[${table}DB.edit] Response not JSON:`, text);\r\n+\t\t\t\t throw parseErr;\r\n+\t\t\t }\r\n+\t\t } catch (err) {\r\n+\t\t\t console.error(`Edit failed [${table}]:`, err);\r\n+\t\t\t return { error: err.message };\r\n+\t\t }\r\n \t },\r\n-\t body: JSON.stringify({ ...data, table })\r\n-\t });\r\n-\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t return await res.json();\r\n-\t } catch (err) {\r\n-\t console.error(`Edit failed [${table}]:`, err);\r\n-\t return { error: err.message };\r\n-\t }\r\n-\t },\r\n \t delete: async (idOrKey) => {\r\n-\t try {\r\n-\t const keyName = typeof idOrKey === 'object' ? Object.keys(idOrKey)[0] : (table === 'system_settings' ? 'key' : 'id');\r\n-\t const keyValue = typeof idOrKey === 'object' ? Object.values(idOrKey)[0] : idOrKey;\r\n-\t const res = await fetch(API_URL, {\r\n-\t method: \"DELETE\",\r\n-\t headers: {\r\n-\t\t \"Content-Type\": \"application/json\",\r\n-\t\t \"Accept\": \"application/json\",\r\n-\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n-\t },\r\n-\t body: JSON.stringify({ [keyName]: keyValue, table })\r\n-\t });\r\n-\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n-\t return await res.json();\r\n-\t } catch (err) {\r\n-\t console.error(`Delete failed [${table}]:`, err);\r\n-\t return { error: err.message };\r\n+\t\t console.log(`[${table}DB.delete] Key:`, idOrKey);\r\n+\t\t try {\r\n+\t\t\t const keyName = typeof idOrKey === 'object' ? Object.keys(idOrKey)[0] : (table === 'system_settings' ? 'key' : 'id');\r\n+\t\t\t const keyValue = typeof idOrKey === 'object' ? Object.values(idOrKey)[0] : idOrKey;\r\n+\t\t\t const res = await fetch(API_URL, {\r\n+\t\t\t\t method: \"DELETE\",\r\n+\t\t\t\t headers: {\r\n+\t\t\t\t\t \"Content-Type\": \"application/json\",\r\n+\t\t\t\t\t \"Accept\": \"application/json\",\r\n+\t\t\t\t\t \"X-Requested-With\": \"XMLHttpRequest\"\r\n+\t\t\t\t },\r\n+\t\t\t\t body: JSON.stringify({ [keyName]: keyValue, table })\r\n+\t\t\t });\r\n+\t\t\t console.log(`[${table}DB.delete] Response status:`, res.status);\r\n+\t\t\t const text = await res.text();\r\n+\t\t\t try {\r\n+\t\t\t\t const json = JSON.parse(text);\r\n+\t\t\t\t console.log(`[${table}DB.delete] Response JSON:`, json);\r\n+\t\t\t\t if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n+\t\t\t\t return json;\r\n+\t\t\t } catch (parseErr) {\r\n+\t\t\t\t console.error(`[${table}DB.delete] Response not JSON:`, text);\r\n+\t\t\t\t throw parseErr;\r\n+\t\t\t }\r\n+\t\t } catch (err) {\r\n+\t\t\t console.error(`Delete failed [${table}]:`, err);\r\n+\t\t\t return { error: err.message };\r\n+\t\t }\r\n \t }\r\n-\t }\r\n \t };\r\n }\r\n \r\n // Ready-to-use DB objects for each table\r\n"
                },
                {
                    "date": 1771856401248,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-const API_URL = \"http://localhost/Ethans%20Cafe/codes/php/app.php\";\r\n+const API_URL = \"/php/app.php\";\r\n \r\n export function createDB(table) {\r\n \t return {\r\n \t add: async (data) => {\r\n"
                }
            ],
            "date": 1771488046855,
            "name": "Commit-0",
            "content": "const API_URL = \"http://localhost/path_to_api/app.php\";\r\n\r\nexport const rolesDB = {\r\n\tadd: async (data) => {\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(API_URL, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t});\r\n\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\t\t\treturn await res.json();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Add failed:\", err);\r\n\t\t\treturn { error: err.message };\r\n\t\t}\r\n\t},\r\n\tshow: async (filters = {}) => {\r\n\t\ttry {\r\n\t\t\tconst query = new URLSearchParams(filters).toString();\r\n\t\t\tconst res = await fetch(query ? `${API_URL}?${query}` : API_URL);\r\n\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\t\t\treturn await res.json();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Show failed:\", err);\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\tedit: async (data) => {\r\n\t\ttry {\r\n\t\t\tif (!data.id) throw new Error(\"Missing id for update\");\r\n\t\t\tconst res = await fetch(API_URL, {\r\n\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t});\r\n\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\t\t\treturn await res.json();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Edit failed:\", err);\r\n\t\t\treturn { error: err.message };\r\n\t\t}\r\n\t},\r\n\tdelete: async (id) => {\r\n\t\ttry {\r\n\t\t\tconst res = await fetch(API_URL, {\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({ id })\r\n\t\t\t});\r\n\t\t\tif (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\t\t\treturn await res.json();\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Delete failed:\", err);\r\n\t\t\treturn { error: err.message };\r\n\t\t}\r\n\t}\r\n};\r\n"
        }
    ]
}