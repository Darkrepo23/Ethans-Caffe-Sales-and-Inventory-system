{
    "sourceFile": "staff.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 11,
            "patches": [
                {
                    "date": 1771142695876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1771142721763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n     if (document.getElementById('activityLogTable')) initializeActivityLogFunctionality();\r\n });\r\n \r\n // Aliases for compatibility with separate pages\r\n+const loadMenuItems = () => initializeMenuFunctionality();\r\n const loadMenuItemsData = () => loadMenuItems();\r\n const loadIngredients = () => initializeIngredientsFunctionality();\r\n const loadIngredientsData = () => loadIngredients();\r\n const loadReceipts = () => initializeReceiptsFunctionality();\r\n"
                },
                {
                    "date": 1771142738412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,17 +26,17 @@\n     if (document.getElementById('changePasswordForm')) initializeAccountFunctionality();\r\n     if (document.getElementById('activityLogTable')) initializeActivityLogFunctionality();\r\n });\r\n \r\n-// Aliases for compatibility with separate pages\r\n-const loadMenuItems = () => initializeMenuFunctionality();\r\n-const loadMenuItemsData = () => loadMenuItems();\r\n-const loadIngredients = () => initializeIngredientsFunctionality();\r\n-const loadIngredientsData = () => loadIngredients();\r\n-const loadReceipts = () => initializeReceiptsFunctionality();\r\n-const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n-const loadAccountInfo = () => initializeAccountFunctionality();\r\n-const loadActivityLog = () => initializeActivityLogFunctionality();\r\n+// // Aliases for compatibility with separate pages\r\n+// // const loadMenuItems = () => initializeMenuFunctionality();\r\n+// const loadMenuItemsData = () => loadMenuItems();\r\n+// // const loadIngredients = () => initializeIngredientsFunctionality();\r\n+// const loadIngredientsData = () => loadIngredients();\r\n+// const loadReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadAccountInfo = () => initializeAccountFunctionality();\r\n+// const loadActivityLog = () => initializeActivityLogFunctionality();\r\n \r\n // Common features for all staff pages\r\n function initializeCommonStaffFeatures() {\r\n     // Sidebar toggle (global)\r\n"
                },
                {
                    "date": 1771142867771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,12 +31,12 @@\n // // const loadMenuItems = () => initializeMenuFunctionality();\r\n // const loadMenuItemsData = () => loadMenuItems();\r\n // // const loadIngredients = () => initializeIngredientsFunctionality();\r\n // const loadIngredientsData = () => loadIngredients();\r\n-// const loadReceipts = () => initializeReceiptsFunctionality();\r\n-// const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n-// const loadAccountInfo = () => initializeAccountFunctionality();\r\n-// const loadActivityLog = () => initializeActivityLogFunctionality();\r\n+const loadReceipts = () => initializeReceiptsFunctionality();\r\n+const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n+const loadAccountInfo = () => initializeAccountFunctionality();\r\n+const loadActivityLog = () => initializeActivityLogFunctionality();\r\n \r\n // Common features for all staff pages\r\n function initializeCommonStaffFeatures() {\r\n     // Sidebar toggle (global)\r\n"
                },
                {
                    "date": 1771142875959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,12 +31,12 @@\n // // const loadMenuItems = () => initializeMenuFunctionality();\r\n // const loadMenuItemsData = () => loadMenuItems();\r\n // // const loadIngredients = () => initializeIngredientsFunctionality();\r\n // const loadIngredientsData = () => loadIngredients();\r\n-const loadReceipts = () => initializeReceiptsFunctionality();\r\n-const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n-const loadAccountInfo = () => initializeAccountFunctionality();\r\n-const loadActivityLog = () => initializeActivityLogFunctionality();\r\n+// const loadReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadAccountInfo = () => initializeAccountFunctionality();\r\n+// const loadActivityLog = () => initializeActivityLogFunctionality();\r\n \r\n // Common features for all staff pages\r\n function initializeCommonStaffFeatures() {\r\n     // Sidebar toggle (global)\r\n"
                },
                {
                    "date": 1771142903936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n // // const loadMenuItems = () => initializeMenuFunctionality();\r\n // const loadMenuItemsData = () => loadMenuItems();\r\n // // const loadIngredients = () => initializeIngredientsFunctionality();\r\n // const loadIngredientsData = () => loadIngredients();\r\n-// const loadReceipts = () => initializeReceiptsFunctionality();\r\n+const loadReceipts = () => initializeReceiptsFunctionality();\r\n // const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n // const loadAccountInfo = () => initializeAccountFunctionality();\r\n // const loadActivityLog = () => initializeActivityLogFunctionality();\r\n \r\n"
                },
                {
                    "date": 1771142994385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,55 +1,61 @@\n-// Staff Dashboard JavaScript - Updated for Multi-page support\r\n+// ===============================\r\n+// Staff Dashboard JavaScript\r\n+// Clean Multi-Page Version\r\n+// ===============================\r\n \r\n-// Global variables\r\n+// ===============================\r\n+// Global State\r\n+// ===============================\r\n let currentSaleItems = [];\r\n let currentSaleId = null;\r\n let allMenuItems = [];\r\n let allIngredients = [];\r\n \r\n+// ===============================\r\n // DOM Ready\r\n+// ===============================\r\n document.addEventListener('DOMContentLoaded', function () {\r\n-    // Initialize tooltips - only if bootstrap is available\r\n-    if (typeof bootstrap !== 'undefined') {\r\n-        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\r\n-        tooltipTriggerList.map(function (tooltipTriggerEl) {\r\n-            return new bootstrap.Tooltip(tooltipTriggerEl);\r\n-        });\r\n-    }\r\n \r\n-    // Initialize only the sections present on the current page\r\n     initializeCommonStaffFeatures();\r\n \r\n-    // Auto-initialize based on elements present\r\n-    if (document.getElementById('menuItemsGrid')) initializeMenuFunctionality();\r\n-    if (document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable')) initializeIngredientsFunctionality();\r\n-    if (document.getElementById('recentReceipts')) initializeReceiptsFunctionality();\r\n-    if (document.getElementById('changePasswordForm')) initializeAccountFunctionality();\r\n-    if (document.getElementById('activityLogTable')) initializeActivityLogFunctionality();\r\n+    // Auto-detect page sections\r\n+    if (document.getElementById('menuItemsGrid')) {\r\n+        initializeMenuFunctionality();\r\n+    }\r\n+\r\n+    if (document.getElementById('ingredientsListTable') ||\r\n+        document.getElementById('ingredientsTable')) {\r\n+        initializeIngredientsFunctionality();\r\n+    }\r\n+\r\n+    if (document.getElementById('recentReceipts')) {\r\n+        initializeReceiptsFunctionality();\r\n+    }\r\n+\r\n+    if (document.getElementById('changePasswordForm')) {\r\n+        initializeAccountFunctionality();\r\n+    }\r\n+\r\n+    if (document.getElementById('activityLogTable')) {\r\n+        initializeActivityLogFunctionality();\r\n+    }\r\n });\r\n \r\n-// // Aliases for compatibility with separate pages\r\n-// // const loadMenuItems = () => initializeMenuFunctionality();\r\n-// const loadMenuItemsData = () => loadMenuItems();\r\n-// // const loadIngredients = () => initializeIngredientsFunctionality();\r\n-// const loadIngredientsData = () => loadIngredients();\r\n-const loadReceipts = () => initializeReceiptsFunctionality();\r\n-// const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n-// const loadAccountInfo = () => initializeAccountFunctionality();\r\n-// const loadActivityLog = () => initializeActivityLogFunctionality();\r\n+// ===============================\r\n+// Common Features\r\n+// ===============================\r\n+function initializeCommonStaffFeatures() {\r\n \r\n-// Common features for all staff pages\r\n-function initializeCommonStaffFeatures() {\r\n-    // Sidebar toggle (global)\r\n     const sidebarToggle = document.getElementById('sidebarToggle');\r\n     const sidebar = document.getElementById('sidebar');\r\n+\r\n     if (sidebarToggle && sidebar) {\r\n         sidebarToggle.addEventListener('click', function () {\r\n             sidebar.classList.toggle('show');\r\n         });\r\n     }\r\n \r\n-    // Logout button (global)\r\n     const logoutBtn = document.getElementById('logoutBtn');\r\n     if (logoutBtn) {\r\n         logoutBtn.addEventListener('click', function (e) {\r\n             e.preventDefault();\r\n@@ -60,183 +66,118 @@\n         });\r\n     }\r\n }\r\n \r\n-// Menu Sales Functions\r\n+// ===============================\r\n+// MENU SECTION\r\n+// ===============================\r\n function initializeMenuFunctionality() {\r\n-    // Start new sale button\r\n-    const startNewSaleBtn = document.getElementById('startNewSale');\r\n-    if (startNewSaleBtn) {\r\n-        startNewSaleBtn.addEventListener('click', function () {\r\n-            startNewSale();\r\n-        });\r\n-    }\r\n \r\n-    // Record sale button\r\n-    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n-    if (recordSaleBtn) {\r\n-        recordSaleBtn.addEventListener('click', function () {\r\n-            showConfirm('Are you sure you want to record this sale?', function () {\r\n-                recordSale();\r\n-            });\r\n-        });\r\n-    }\r\n+    const startBtn = document.getElementById('startNewSale');\r\n+    const recordBtn = document.getElementById('recordSaleBtn');\r\n+    const clearBtn = document.getElementById('clearSaleBtn');\r\n \r\n-    // Clear sale button\r\n-    const clearSaleBtn = document.getElementById('clearSaleBtn');\r\n-    if (clearSaleBtn) {\r\n-        clearSaleBtn.addEventListener('click', function () {\r\n-            clearCurrentSale();\r\n-        });\r\n-    }\r\n+    if (startBtn) startBtn.addEventListener('click', startNewSale);\r\n+    if (recordBtn) recordBtn.addEventListener('click', () =>\r\n+        showConfirm('Record this sale?', recordSale)\r\n+    );\r\n+    if (clearBtn) clearBtn.addEventListener('click', clearCurrentSale);\r\n \r\n-    // Load initial data\r\n     loadMenuItems();\r\n }\r\n \r\n function loadMenuItems() {\r\n-    const menuGrid = document.getElementById('menuItemsGrid');\r\n-    if (!menuGrid) return;\r\n+    const grid = document.getElementById('menuItemsGrid');\r\n+    if (!grid) return;\r\n \r\n-    // Show loading\r\n-    menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><div class=\"loading-spinner\"></div><p class=\"mt-2\">Loading menu items...</p></div>';\r\n+    grid.innerHTML = `<div class=\"text-center py-4\">Loading menu...</div>`;\r\n \r\n-    // Simulate API call with delay\r\n     setTimeout(() => {\r\n         allMenuItems = [\r\n-            { id: 1, name: 'Beef Steak', category: 'Main Course', image: 'https://images.unsplash.com/photo-1600891964092-4316c288032e?w=400&h=300&fit=crop', available: true, description: 'Grilled beef steak with vegetables' },\r\n-            { id: 2, name: 'Chicken Curry', category: 'Main Course', image: 'https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=400&h=300&fit=crop', available: true, description: 'Spicy chicken curry with rice' },\r\n-            { id: 3, name: 'Vegetable Salad', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1540420773420-3366772f4999?w=400&h=300&fit=crop', available: true, description: 'Fresh mixed vegetable salad' },\r\n-            { id: 4, name: 'Garlic Bread', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1573140247632-f8fd74997d5c?w=400&h=300&fit=crop', available: true, description: 'Toasted bread with garlic butter' },\r\n-            { id: 5, name: 'French Fries', category: 'Side Dish', image: 'https://images.unsplash.com/photo-1576107232684-1279f390859f?w=400&h=300&fit=crop', available: true, description: 'Crispy golden french fries' },\r\n-            { id: 6, name: 'Grilled Salmon', category: 'Main Course', image: 'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=400&h=300&fit=crop', available: false, description: 'Fresh grilled salmon with lemon butter sauce' },\r\n-            { id: 7, name: 'Pasta Carbonara', category: 'Main Course', image: 'https://images.unsplash.com/photo-1598866594230-a7c12756260f?w=400&h=300&fit=crop', available: true, description: 'Creamy pasta with bacon and cheese' },\r\n-            { id: 8, name: 'Chocolate Cake', category: 'Dessert', image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop', available: true, description: 'Rich chocolate cake with frosting' }\r\n+            { id: 1, name: 'Beef Steak', category: 'Main Course', available: true },\r\n+            { id: 2, name: 'Chicken Curry', category: 'Main Course', available: true },\r\n+            { id: 3, name: 'Vegetable Salad', category: 'Appetizer', available: true },\r\n+            { id: 4, name: 'Garlic Bread', category: 'Appetizer', available: true },\r\n+            { id: 5, name: 'French Fries', category: 'Side Dish', available: true },\r\n+            { id: 6, name: 'Grilled Salmon', category: 'Main Course', available: false },\r\n+            { id: 7, name: 'Pasta Carbonara', category: 'Main Course', available: true },\r\n+            { id: 8, name: 'Chocolate Cake', category: 'Dessert', available: true }\r\n         ];\r\n \r\n         displayMenuItems(allMenuItems);\r\n-    }, 800);\r\n+    }, 500);\r\n }\r\n \r\n function displayMenuItems(items) {\r\n-    const menuGrid = document.getElementById('menuItemsGrid');\r\n-    if (!menuGrid) return;\r\n+    const grid = document.getElementById('menuItemsGrid');\r\n+    if (!grid) return;\r\n \r\n-    menuGrid.innerHTML = '';\r\n+    grid.innerHTML = '';\r\n \r\n     if (items.length === 0) {\r\n-        menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><i class=\"fas fa-utensils fa-3x text-muted mb-3\"></i><p class=\"text-muted\">No menu items found</p></div>';\r\n+        grid.innerHTML = `<div class=\"text-center py-4\">No items found</div>`;\r\n         return;\r\n     }\r\n \r\n     items.forEach(item => {\r\n-        const col = document.createElement('div');\r\n-        col.className = 'col-lg-3 col-md-4 col-sm-6 mb-4';\r\n-\r\n-        const imgSrc = item.image || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop';\r\n-\r\n-        col.innerHTML = `\r\n-            <div class=\"menu-item-card ${!item.available ? 'opacity-50' : ''}\">\r\n-                <div class=\"position-relative\">\r\n-                    <img src=\"${imgSrc}\" alt=\"${item.name}\" class=\"menu-item-img\" onerror=\"this.src='https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop'\">\r\n-                    <span class=\"menu-item-badge badge ${item.available ? 'bg-green' : 'bg-secondary'}\">\r\n-                        ${item.available ? 'Available' : 'Out of Stock'}\r\n-                    </span>\r\n-                </div>\r\n-                <div class=\"p-3\">\r\n-                    <h5 class=\"card-title text-maroon\">${item.name}</h5>\r\n-                    <p class=\"card-text text-muted small\">${item.category}</p>\r\n-                    <p class=\"card-text small mb-3\">${item.description}</p>\r\n-                    ${item.available ?\r\n-                `<button class=\"btn btn-sm btn-maroon w-100 add-to-sale\" data-id=\"${item.id}\" data-name=\"${item.name}\">\r\n-                            <i class=\"fas fa-cart-plus me-1\"></i> Add to Sale\r\n-                        </button>` :\r\n-                `<button class=\"btn btn-sm btn-secondary w-100\" disabled>Unavailable</button>`\r\n-            }\r\n-                </div>\r\n+        const div = document.createElement('div');\r\n+        div.className = 'col-md-3 mb-3';\r\n+        div.innerHTML = `\r\n+            <div class=\"card p-3 ${!item.available ? 'opacity-50' : ''}\">\r\n+                <h6>${item.name}</h6>\r\n+                <small>${item.category}</small>\r\n+                <button class=\"btn btn-sm btn-maroon mt-2\"\r\n+                    ${!item.available ? 'disabled' : ''}\r\n+                    onclick=\"addItemToSale(${item.id}, '${item.name}')\">\r\n+                    Add\r\n+                </button>\r\n             </div>\r\n         `;\r\n-\r\n-        menuGrid.appendChild(col);\r\n+        grid.appendChild(div);\r\n     });\r\n-\r\n-    // Add event listeners to add-to-sale buttons\r\n-    document.querySelectorAll('.add-to-sale').forEach(button => {\r\n-        button.addEventListener('click', function () {\r\n-            const itemId = this.getAttribute('data-id');\r\n-            const itemName = this.getAttribute('data-name');\r\n-            addItemToSale(itemId, itemName);\r\n-        });\r\n-    });\r\n }\r\n \r\n-function filterMenuItems() {\r\n-    const searchTerm = document.getElementById('menuSearch')?.value.toLowerCase() || '';\r\n-    const category = document.getElementById('menuCategoryFilter')?.value || '';\r\n-\r\n-    const filtered = allMenuItems.filter(item =>\r\n-        item.name.toLowerCase().includes(searchTerm) &&\r\n-        (category === '' || item.category === category)\r\n-    );\r\n-    displayMenuItems(filtered);\r\n-}\r\n-\r\n function startNewSale() {\r\n     currentSaleItems = [];\r\n     currentSaleId = 'SALE-' + Date.now();\r\n     updateSaleDisplay();\r\n-    showModalNotification('New sale started', 'success', 'Sale Started');\r\n }\r\n \r\n-function addItemToSale(itemId, itemName) {\r\n-    const existingItem = currentSaleItems.find(item => item.id === itemId);\r\n-    if (existingItem) {\r\n-        existingItem.quantity += 1;\r\n-    } else {\r\n-        currentSaleItems.push({ id: itemId, name: itemName, quantity: 1 });\r\n-    }\r\n+function addItemToSale(id, name) {\r\n+    const existing = currentSaleItems.find(i => i.id === id);\r\n+    if (existing) existing.quantity++;\r\n+    else currentSaleItems.push({ id, name, quantity: 1 });\r\n+\r\n     updateSaleDisplay();\r\n-    showModalNotification(`${itemName} added to sale`, 'success', 'Item Added');\r\n }\r\n \r\n function updateSaleDisplay() {\r\n-    const saleItemsContainer = document.getElementById('saleItems');\r\n-    const totalItemsCount = document.getElementById('totalItemsCount');\r\n-    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n+    const container = document.getElementById('saleItems');\r\n+    const count = document.getElementById('totalItemsCount');\r\n+    const recordBtn = document.getElementById('recordSaleBtn');\r\n \r\n-    if (!saleItemsContainer) return;\r\n+    if (!container) return;\r\n \r\n     if (currentSaleItems.length === 0) {\r\n-        saleItemsContainer.innerHTML = '<p class=\"text-muted text-center py-3\">No items added to sale yet.</p>';\r\n-        if (totalItemsCount) totalItemsCount.textContent = '0';\r\n-        if (recordSaleBtn) recordSaleBtn.disabled = true;\r\n+        container.innerHTML = `<p class=\"text-muted\">No items added</p>`;\r\n+        if (count) count.textContent = '0';\r\n+        if (recordBtn) recordBtn.disabled = true;\r\n         return;\r\n     }\r\n \r\n-    let totalItems = 0;\r\n-    let itemsHtml = '';\r\n-\r\n-    currentSaleItems.forEach((item, index) => {\r\n-        totalItems += item.quantity;\r\n-        itemsHtml += `\r\n-            <div class=\"sale-item d-flex justify-content-between align-items-center mb-2 p-2 border-bottom\">\r\n-                <div>\r\n-                    <h6 class=\"mb-0\">${item.name}</h6>\r\n-                    <small class=\"text-muted\">ID: ${item.id}</small>\r\n-                </div>\r\n-                <div class=\"d-flex align-items-center\">\r\n-                    <span class=\"badge bg-maroon me-2\">${item.quantity}</span>\r\n-                    <button class=\"btn btn-outline-danger btn-sm\" onclick=\"removeSaleItem(${index})\">\r\n-                        <i class=\"fas fa-times\"></i>\r\n-                    </button>\r\n-                </div>\r\n+    let total = 0;\r\n+    container.innerHTML = currentSaleItems.map((item, i) => {\r\n+        total += item.quantity;\r\n+        return `\r\n+            <div class=\"d-flex justify-content-between mb-2\">\r\n+                ${item.name} (x${item.quantity})\r\n+                <button onclick=\"removeSaleItem(${i})\">x</button>\r\n             </div>\r\n         `;\r\n-    });\r\n+    }).join('');\r\n \r\n-    saleItemsContainer.innerHTML = itemsHtml;\r\n-    if (totalItemsCount) totalItemsCount.textContent = totalItems;\r\n-    if (recordSaleBtn) recordSaleBtn.disabled = false;\r\n+    if (count) count.textContent = total;\r\n+    if (recordBtn) recordBtn.disabled = false;\r\n }\r\n \r\n function removeSaleItem(index) {\r\n     currentSaleItems.splice(index, 1);\r\n@@ -249,156 +190,87 @@\n }\r\n \r\n function recordSale() {\r\n     if (currentSaleItems.length === 0) return;\r\n-\r\n-    showModalNotification('Recording sale...', 'info', 'Processing');\r\n-    setTimeout(() => {\r\n-        showModalNotification('Sale recorded successfully!', 'success', 'Success');\r\n-        clearCurrentSale();\r\n-    }, 1000);\r\n+    showModalNotification('Sale recorded!', 'success', 'Success');\r\n+    clearCurrentSale();\r\n }\r\n \r\n-// Ingredients Functions\r\n+// ===============================\r\n+// INGREDIENTS\r\n+// ===============================\r\n function initializeIngredientsFunctionality() {\r\n-    const searchInput = document.getElementById('ingredientSearch');\r\n-    if (searchInput) {\r\n-        searchInput.addEventListener('input', filterIngredients);\r\n-    }\r\n-\r\n-    const categoryFilter = document.getElementById('ingredientCategoryFilter');\r\n-    if (categoryFilter) {\r\n-        categoryFilter.addEventListener('change', filterIngredients);\r\n-    }\r\n-\r\n     loadIngredients();\r\n }\r\n \r\n function loadIngredients() {\r\n-    const tableElem = document.getElementById('ingredientsListTable');\r\n-    if (!tableElem) return;\r\n+    const table = document.getElementById('ingredientsListTable');\r\n+    if (!table) return;\r\n \r\n-    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n-    if (!tbody) return;\r\n+    const tbody = table.querySelector('tbody');\r\n+    tbody.innerHTML = `<tr><td colspan=\"6\">Loading...</td></tr>`;\r\n \r\n-    tbody.innerHTML = '<tr><td colspan=\"6\" class=\"text-center py-4\">Loading...</td></tr>';\r\n-\r\n     setTimeout(() => {\r\n         allIngredients = [\r\n-            { id: 1, name: 'Beef', category: 'Meat', quantity: 15, unit: 'kg', status: 'Normal', minLevel: 5 },\r\n-            { id: 2, name: 'Chicken', category: 'Meat', quantity: 8, unit: 'kg', status: 'Low', minLevel: 10 },\r\n-            { id: 3, name: 'Onions', category: 'Vegetables', quantity: 3, unit: 'kg', status: 'Low', minLevel: 5 },\r\n-            { id: 4, name: 'Cheese', category: 'Dairy', quantity: 4, unit: 'kg', status: 'Low', minLevel: 5 },\r\n-            { id: 5, name: 'Garlic', category: 'Spices', quantity: 1, unit: 'kg', status: 'Low', minLevel: 2 },\r\n-            { id: 6, name: 'Cooking Oil', category: 'Supplies', quantity: 2, unit: 'L', status: 'Low', minLevel: 5 },\r\n-            { id: 7, name: 'Red Wine', category: 'Beverages', quantity: 1, unit: 'bottle', status: 'Low', minLevel: 3 }\r\n+            { name: 'Beef', quantity: 15, unit: 'kg', status: 'Normal' },\r\n+            { name: 'Chicken', quantity: 8, unit: 'kg', status: 'Low' }\r\n         ];\r\n-        displayIngredients(allIngredients);\r\n+\r\n+        tbody.innerHTML = allIngredients.map(i => `\r\n+            <tr>\r\n+                <td>${i.name}</td>\r\n+                <td>${i.quantity} ${i.unit}</td>\r\n+                <td>${i.status}</td>\r\n+            </tr>\r\n+        `).join('');\r\n     }, 500);\r\n }\r\n \r\n-function displayIngredients(ingredients) {\r\n-    const tableElem = document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable');\r\n-    if (!tableElem) return;\r\n-\r\n-    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n-    if (!tbody) return;\r\n-\r\n-    tbody.innerHTML = '';\r\n-    ingredients.forEach(ing => {\r\n-        const row = tbody.insertRow();\r\n-        row.innerHTML = `\r\n-            <td>${ing.name}</td>\r\n-            <td>${ing.category}</td>\r\n-            <td>${ing.quantity} ${ing.unit}</td>\r\n-            <td>${ing.minLevel || '-'}</td>\r\n-            <td><span class=\"badge ${ing.status === 'Normal' ? 'bg-success' : 'bg-warning'}\">${ing.status}</span></td>\r\n-            <td><button class=\"btn btn-sm btn-outline-maroon\" onclick=\"showUpdateModal(${ing.id})\">Update</button></td>\r\n-        `;\r\n-    });\r\n-}\r\n-\r\n-function showUpdateModal(id) {\r\n-    // Logic to show update modal\r\n-    const modal = new bootstrap.Modal(document.getElementById('updateQuantityModal') || document.getElementById('increaseQuantityModal'));\r\n-    modal.show();\r\n-}\r\n-\r\n-function filterIngredients() {\r\n-    const searchTerm = document.getElementById('ingredientSearch')?.value.toLowerCase() || '';\r\n-    const category = document.getElementById('ingredientCategoryFilter')?.value || '';\r\n-\r\n-    const filtered = allIngredients.filter(ing =>\r\n-        ing.name.toLowerCase().includes(searchTerm) &&\r\n-        (category === '' || ing.category === category)\r\n-    );\r\n-    displayIngredients(filtered);\r\n-}\r\n-\r\n-// Receipts Functions\r\n+// ===============================\r\n+// RECEIPTS\r\n+// ===============================\r\n function initializeReceiptsFunctionality() {\r\n-    loadRecentReceipts();\r\n-}\r\n-\r\n-function loadRecentReceipts() {\r\n     const container = document.getElementById('recentReceipts');\r\n     if (!container) return;\r\n-\r\n-    container.innerHTML = '<a href=\"#\" class=\"list-group-item list-group-item-action\">No recent receipts</a>';\r\n+    container.innerHTML = `<div>No recent receipts</div>`;\r\n }\r\n \r\n-// Account Functions\r\n+// ===============================\r\n+// ACCOUNT\r\n+// ===============================\r\n function initializeAccountFunctionality() {\r\n     const form = document.getElementById('changePasswordForm');\r\n-    if (form) {\r\n-        form.addEventListener('submit', function (e) {\r\n-            e.preventDefault();\r\n-            showModalNotification('Password updated successfully', 'success', 'Account');\r\n-        });\r\n-    }\r\n+    if (!form) return;\r\n \r\n-    const saveBtn = document.getElementById('saveAccountInfoBtn');\r\n-    if (saveBtn) {\r\n-        saveBtn.addEventListener('click', function (e) {\r\n-            e.preventDefault();\r\n-            saveAccountInfo();\r\n-        });\r\n-    }\r\n+    form.addEventListener('submit', function (e) {\r\n+        e.preventDefault();\r\n+        showModalNotification('Password updated!', 'success', 'Account');\r\n+    });\r\n }\r\n \r\n-function saveAccountInfo() {\r\n-    showModalNotification('Account information updated successfully', 'success', 'Account');\r\n-}\r\n-\r\n-// Activity Log Functions\r\n+// ===============================\r\n\\ No newline at end of file\n+// ACTIVITY LOG\r\n+// ===============================\r\n function initializeActivityLogFunctionality() {\r\n-    loadActivityLog();\r\n-}\r\n+    const table = document.getElementById('activityLogTable');\r\n+    if (!table) return;\r\n \r\n-function loadActivityLog() {\r\n-    const tableElem = document.getElementById('activityLogTable');\r\n-    if (!tableElem) return;\r\n-\r\n-    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n-    if (!tbody) return;\r\n-\r\n-    tbody.innerHTML = '<tr><td>2023-10-01</td><td>Logged in</td><td>-</td><td>Success</td></tr>';\r\n+    const tbody = table.querySelector('tbody');\r\n+    tbody.innerHTML = `\r\n+        <tr>\r\n+            <td>2023-10-01</td>\r\n+            <td>Logged In</td>\r\n+            <td>Success</td>\r\n+        </tr>\r\n+    `;\r\n }\r\n \r\n-// Helper Functions\r\n+// ===============================\r\n+// Helpers\r\n+// ===============================\r\n function showModalNotification(msg, type, title) {\r\n-    if (typeof Swal !== 'undefined') {\r\n-        Swal.fire({ title: title || 'Notification', text: msg, icon: type || 'info', confirmButtonColor: '#800000' });\r\n-    } else {\r\n-        alert(`${title}: ${msg}`);\r\n-    }\r\n+    alert(`${title || 'Notification'}: ${msg}`);\r\n }\r\n \r\n function showConfirm(msg, callback) {\r\n-    if (typeof Swal !== 'undefined') {\r\n-        Swal.fire({\r\n-            title: 'Confirm', text: msg, icon: 'question', showCancelButton: true, confirmButtonColor: '#800000'\r\n-        }).then(result => { if (result.isConfirmed && callback) callback(); });\r\n-    } else {\r\n-        if (confirm(msg) && callback) callback();\r\n-    }\r\n-}\n+    if (confirm(msg) && callback) callback();\r\n+}\r\n"
                },
                {
                    "date": 1771143007218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,61 +1,55 @@\n-// ===============================\r\n-// Staff Dashboard JavaScript\r\n-// Clean Multi-Page Version\r\n-// ===============================\r\n+// Staff Dashboard JavaScript - Updated for Multi-page support\r\n \r\n-// ===============================\r\n-// Global State\r\n-// ===============================\r\n+// Global variables\r\n let currentSaleItems = [];\r\n let currentSaleId = null;\r\n let allMenuItems = [];\r\n let allIngredients = [];\r\n \r\n-// ===============================\r\n // DOM Ready\r\n-// ===============================\r\n document.addEventListener('DOMContentLoaded', function () {\r\n+    // Initialize tooltips - only if bootstrap is available\r\n+    if (typeof bootstrap !== 'undefined') {\r\n+        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\r\n+        tooltipTriggerList.map(function (tooltipTriggerEl) {\r\n+            return new bootstrap.Tooltip(tooltipTriggerEl);\r\n+        });\r\n+    }\r\n \r\n+    // Initialize only the sections present on the current page\r\n     initializeCommonStaffFeatures();\r\n \r\n-    // Auto-detect page sections\r\n-    if (document.getElementById('menuItemsGrid')) {\r\n-        initializeMenuFunctionality();\r\n-    }\r\n+    // Auto-initialize based on elements present\r\n+    if (document.getElementById('menuItemsGrid')) initializeMenuFunctionality();\r\n+    if (document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable')) initializeIngredientsFunctionality();\r\n+    if (document.getElementById('recentReceipts')) initializeReceiptsFunctionality();\r\n+    if (document.getElementById('changePasswordForm')) initializeAccountFunctionality();\r\n+    if (document.getElementById('activityLogTable')) initializeActivityLogFunctionality();\r\n+});\r\n \r\n-    if (document.getElementById('ingredientsListTable') ||\r\n-        document.getElementById('ingredientsTable')) {\r\n-        initializeIngredientsFunctionality();\r\n-    }\r\n+// // Aliases for compatibility with separate pages\r\n+// // const loadMenuItems = () => initializeMenuFunctionality();\r\n+// const loadMenuItemsData = () => loadMenuItems();\r\n+// // const loadIngredients = () => initializeIngredientsFunctionality();\r\n+// const loadIngredientsData = () => loadIngredients();\r\n+const loadReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadRecentReceipts = () => initializeReceiptsFunctionality();\r\n+// const loadAccountInfo = () => initializeAccountFunctionality();\r\n+// const loadActivityLog = () => initializeActivityLogFunctionality();\r\n \r\n-    if (document.getElementById('recentReceipts')) {\r\n-        initializeReceiptsFunctionality();\r\n-    }\r\n-\r\n-    if (document.getElementById('changePasswordForm')) {\r\n-        initializeAccountFunctionality();\r\n-    }\r\n-\r\n-    if (document.getElementById('activityLogTable')) {\r\n-        initializeActivityLogFunctionality();\r\n-    }\r\n-});\r\n-\r\n-// ===============================\r\n-// Common Features\r\n-// ===============================\r\n+// Common features for all staff pages\r\n function initializeCommonStaffFeatures() {\r\n-\r\n+    // Sidebar toggle (global)\r\n     const sidebarToggle = document.getElementById('sidebarToggle');\r\n     const sidebar = document.getElementById('sidebar');\r\n-\r\n     if (sidebarToggle && sidebar) {\r\n         sidebarToggle.addEventListener('click', function () {\r\n             sidebar.classList.toggle('show');\r\n         });\r\n     }\r\n \r\n+    // Logout button (global)\r\n     const logoutBtn = document.getElementById('logoutBtn');\r\n     if (logoutBtn) {\r\n         logoutBtn.addEventListener('click', function (e) {\r\n             e.preventDefault();\r\n@@ -66,118 +60,183 @@\n         });\r\n     }\r\n }\r\n \r\n-// ===============================\r\n-// MENU SECTION\r\n-// ===============================\r\n+// Menu Sales Functions\r\n function initializeMenuFunctionality() {\r\n+    // Start new sale button\r\n+    const startNewSaleBtn = document.getElementById('startNewSale');\r\n+    if (startNewSaleBtn) {\r\n+        startNewSaleBtn.addEventListener('click', function () {\r\n+            startNewSale();\r\n+        });\r\n+    }\r\n \r\n-    const startBtn = document.getElementById('startNewSale');\r\n-    const recordBtn = document.getElementById('recordSaleBtn');\r\n-    const clearBtn = document.getElementById('clearSaleBtn');\r\n+    // Record sale button\r\n+    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n+    if (recordSaleBtn) {\r\n+        recordSaleBtn.addEventListener('click', function () {\r\n+            showConfirm('Are you sure you want to record this sale?', function () {\r\n+                recordSale();\r\n+            });\r\n+        });\r\n+    }\r\n \r\n-    if (startBtn) startBtn.addEventListener('click', startNewSale);\r\n-    if (recordBtn) recordBtn.addEventListener('click', () =>\r\n-        showConfirm('Record this sale?', recordSale)\r\n-    );\r\n-    if (clearBtn) clearBtn.addEventListener('click', clearCurrentSale);\r\n+    // Clear sale button\r\n+    const clearSaleBtn = document.getElementById('clearSaleBtn');\r\n+    if (clearSaleBtn) {\r\n+        clearSaleBtn.addEventListener('click', function () {\r\n+            clearCurrentSale();\r\n+        });\r\n+    }\r\n \r\n+    // Load initial data\r\n     loadMenuItems();\r\n }\r\n \r\n function loadMenuItems() {\r\n-    const grid = document.getElementById('menuItemsGrid');\r\n-    if (!grid) return;\r\n+    const menuGrid = document.getElementById('menuItemsGrid');\r\n+    if (!menuGrid) return;\r\n \r\n-    grid.innerHTML = `<div class=\"text-center py-4\">Loading menu...</div>`;\r\n+    // Show loading\r\n+    menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><div class=\"loading-spinner\"></div><p class=\"mt-2\">Loading menu items...</p></div>';\r\n \r\n+    // Simulate API call with delay\r\n     setTimeout(() => {\r\n         allMenuItems = [\r\n-            { id: 1, name: 'Beef Steak', category: 'Main Course', available: true },\r\n-            { id: 2, name: 'Chicken Curry', category: 'Main Course', available: true },\r\n-            { id: 3, name: 'Vegetable Salad', category: 'Appetizer', available: true },\r\n-            { id: 4, name: 'Garlic Bread', category: 'Appetizer', available: true },\r\n-            { id: 5, name: 'French Fries', category: 'Side Dish', available: true },\r\n-            { id: 6, name: 'Grilled Salmon', category: 'Main Course', available: false },\r\n-            { id: 7, name: 'Pasta Carbonara', category: 'Main Course', available: true },\r\n-            { id: 8, name: 'Chocolate Cake', category: 'Dessert', available: true }\r\n+            { id: 1, name: 'Beef Steak', category: 'Main Course', image: 'https://images.unsplash.com/photo-1600891964092-4316c288032e?w=400&h=300&fit=crop', available: true, description: 'Grilled beef steak with vegetables' },\r\n+            { id: 2, name: 'Chicken Curry', category: 'Main Course', image: 'https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=400&h=300&fit=crop', available: true, description: 'Spicy chicken curry with rice' },\r\n+            { id: 3, name: 'Vegetable Salad', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1540420773420-3366772f4999?w=400&h=300&fit=crop', available: true, description: 'Fresh mixed vegetable salad' },\r\n+            { id: 4, name: 'Garlic Bread', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1573140247632-f8fd74997d5c?w=400&h=300&fit=crop', available: true, description: 'Toasted bread with garlic butter' },\r\n+            { id: 5, name: 'French Fries', category: 'Side Dish', image: 'https://images.unsplash.com/photo-1576107232684-1279f390859f?w=400&h=300&fit=crop', available: true, description: 'Crispy golden french fries' },\r\n+            { id: 6, name: 'Grilled Salmon', category: 'Main Course', image: 'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=400&h=300&fit=crop', available: false, description: 'Fresh grilled salmon with lemon butter sauce' },\r\n+            { id: 7, name: 'Pasta Carbonara', category: 'Main Course', image: 'https://images.unsplash.com/photo-1598866594230-a7c12756260f?w=400&h=300&fit=crop', available: true, description: 'Creamy pasta with bacon and cheese' },\r\n+            { id: 8, name: 'Chocolate Cake', category: 'Dessert', image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop', available: true, description: 'Rich chocolate cake with frosting' }\r\n         ];\r\n \r\n         displayMenuItems(allMenuItems);\r\n-    }, 500);\r\n+    }, 800);\r\n }\r\n \r\n function displayMenuItems(items) {\r\n-    const grid = document.getElementById('menuItemsGrid');\r\n-    if (!grid) return;\r\n+    const menuGrid = document.getElementById('menuItemsGrid');\r\n+    if (!menuGrid) return;\r\n \r\n-    grid.innerHTML = '';\r\n+    menuGrid.innerHTML = '';\r\n \r\n     if (items.length === 0) {\r\n-        grid.innerHTML = `<div class=\"text-center py-4\">No items found</div>`;\r\n+        menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><i class=\"fas fa-utensils fa-3x text-muted mb-3\"></i><p class=\"text-muted\">No menu items found</p></div>';\r\n         return;\r\n     }\r\n \r\n     items.forEach(item => {\r\n-        const div = document.createElement('div');\r\n-        div.className = 'col-md-3 mb-3';\r\n-        div.innerHTML = `\r\n-            <div class=\"card p-3 ${!item.available ? 'opacity-50' : ''}\">\r\n-                <h6>${item.name}</h6>\r\n-                <small>${item.category}</small>\r\n-                <button class=\"btn btn-sm btn-maroon mt-2\"\r\n-                    ${!item.available ? 'disabled' : ''}\r\n-                    onclick=\"addItemToSale(${item.id}, '${item.name}')\">\r\n-                    Add\r\n-                </button>\r\n+        const col = document.createElement('div');\r\n+        col.className = 'col-lg-3 col-md-4 col-sm-6 mb-4';\r\n+\r\n+        const imgSrc = item.image || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop';\r\n+\r\n+        col.innerHTML = `\r\n+            <div class=\"menu-item-card ${!item.available ? 'opacity-50' : ''}\">\r\n+                <div class=\"position-relative\">\r\n+                    <img src=\"${imgSrc}\" alt=\"${item.name}\" class=\"menu-item-img\" onerror=\"this.src='https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop'\">\r\n+                    <span class=\"menu-item-badge badge ${item.available ? 'bg-green' : 'bg-secondary'}\">\r\n+                        ${item.available ? 'Available' : 'Out of Stock'}\r\n+                    </span>\r\n+                </div>\r\n+                <div class=\"p-3\">\r\n+                    <h5 class=\"card-title text-maroon\">${item.name}</h5>\r\n+                    <p class=\"card-text text-muted small\">${item.category}</p>\r\n+                    <p class=\"card-text small mb-3\">${item.description}</p>\r\n+                    ${item.available ?\r\n+                `<button class=\"btn btn-sm btn-maroon w-100 add-to-sale\" data-id=\"${item.id}\" data-name=\"${item.name}\">\r\n+                            <i class=\"fas fa-cart-plus me-1\"></i> Add to Sale\r\n+                        </button>` :\r\n+                `<button class=\"btn btn-sm btn-secondary w-100\" disabled>Unavailable</button>`\r\n+            }\r\n+                </div>\r\n             </div>\r\n         `;\r\n-        grid.appendChild(div);\r\n+\r\n+        menuGrid.appendChild(col);\r\n     });\r\n+\r\n+    // Add event listeners to add-to-sale buttons\r\n+    document.querySelectorAll('.add-to-sale').forEach(button => {\r\n+        button.addEventListener('click', function () {\r\n+            const itemId = this.getAttribute('data-id');\r\n+            const itemName = this.getAttribute('data-name');\r\n+            addItemToSale(itemId, itemName);\r\n+        });\r\n+    });\r\n }\r\n \r\n+function filterMenuItems() {\r\n+    const searchTerm = document.getElementById('menuSearch')?.value.toLowerCase() || '';\r\n+    const category = document.getElementById('menuCategoryFilter')?.value || '';\r\n+\r\n+    const filtered = allMenuItems.filter(item =>\r\n+        item.name.toLowerCase().includes(searchTerm) &&\r\n+        (category === '' || item.category === category)\r\n+    );\r\n+    displayMenuItems(filtered);\r\n+}\r\n+\r\n function startNewSale() {\r\n     currentSaleItems = [];\r\n     currentSaleId = 'SALE-' + Date.now();\r\n     updateSaleDisplay();\r\n+    showModalNotification('New sale started', 'success', 'Sale Started');\r\n }\r\n \r\n-function addItemToSale(id, name) {\r\n-    const existing = currentSaleItems.find(i => i.id === id);\r\n-    if (existing) existing.quantity++;\r\n-    else currentSaleItems.push({ id, name, quantity: 1 });\r\n-\r\n+function addItemToSale(itemId, itemName) {\r\n+    const existingItem = currentSaleItems.find(item => item.id === itemId);\r\n+    if (existingItem) {\r\n+        existingItem.quantity += 1;\r\n+    } else {\r\n+        currentSaleItems.push({ id: itemId, name: itemName, quantity: 1 });\r\n+    }\r\n     updateSaleDisplay();\r\n+    showModalNotification(`${itemName} added to sale`, 'success', 'Item Added');\r\n }\r\n \r\n function updateSaleDisplay() {\r\n-    const container = document.getElementById('saleItems');\r\n-    const count = document.getElementById('totalItemsCount');\r\n-    const recordBtn = document.getElementById('recordSaleBtn');\r\n+    const saleItemsContainer = document.getElementById('saleItems');\r\n+    const totalItemsCount = document.getElementById('totalItemsCount');\r\n+    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n \r\n-    if (!container) return;\r\n+    if (!saleItemsContainer) return;\r\n \r\n     if (currentSaleItems.length === 0) {\r\n-        container.innerHTML = `<p class=\"text-muted\">No items added</p>`;\r\n-        if (count) count.textContent = '0';\r\n-        if (recordBtn) recordBtn.disabled = true;\r\n+        saleItemsContainer.innerHTML = '<p class=\"text-muted text-center py-3\">No items added to sale yet.</p>';\r\n+        if (totalItemsCount) totalItemsCount.textContent = '0';\r\n+        if (recordSaleBtn) recordSaleBtn.disabled = true;\r\n         return;\r\n     }\r\n \r\n-    let total = 0;\r\n-    container.innerHTML = currentSaleItems.map((item, i) => {\r\n-        total += item.quantity;\r\n-        return `\r\n-            <div class=\"d-flex justify-content-between mb-2\">\r\n-                ${item.name} (x${item.quantity})\r\n-                <button onclick=\"removeSaleItem(${i})\">x</button>\r\n+    let totalItems = 0;\r\n+    let itemsHtml = '';\r\n+\r\n+    currentSaleItems.forEach((item, index) => {\r\n+        totalItems += item.quantity;\r\n+        itemsHtml += `\r\n+            <div class=\"sale-item d-flex justify-content-between align-items-center mb-2 p-2 border-bottom\">\r\n+                <div>\r\n+                    <h6 class=\"mb-0\">${item.name}</h6>\r\n+                    <small class=\"text-muted\">ID: ${item.id}</small>\r\n+                </div>\r\n+                <div class=\"d-flex align-items-center\">\r\n+                    <span class=\"badge bg-maroon me-2\">${item.quantity}</span>\r\n+                    <button class=\"btn btn-outline-danger btn-sm\" onclick=\"removeSaleItem(${index})\">\r\n+                        <i class=\"fas fa-times\"></i>\r\n+                    </button>\r\n+                </div>\r\n             </div>\r\n         `;\r\n-    }).join('');\r\n+    });\r\n \r\n-    if (count) count.textContent = total;\r\n-    if (recordBtn) recordBtn.disabled = false;\r\n+    saleItemsContainer.innerHTML = itemsHtml;\r\n+    if (totalItemsCount) totalItemsCount.textContent = totalItems;\r\n+    if (recordSaleBtn) recordSaleBtn.disabled = false;\r\n }\r\n \r\n function removeSaleItem(index) {\r\n     currentSaleItems.splice(index, 1);\r\n@@ -190,87 +249,156 @@\n }\r\n \r\n function recordSale() {\r\n     if (currentSaleItems.length === 0) return;\r\n-    showModalNotification('Sale recorded!', 'success', 'Success');\r\n-    clearCurrentSale();\r\n+\r\n+    showModalNotification('Recording sale...', 'info', 'Processing');\r\n+    setTimeout(() => {\r\n+        showModalNotification('Sale recorded successfully!', 'success', 'Success');\r\n+        clearCurrentSale();\r\n+    }, 1000);\r\n }\r\n \r\n-// ===============================\r\n-// INGREDIENTS\r\n-// ===============================\r\n+// Ingredients Functions\r\n function initializeIngredientsFunctionality() {\r\n+    const searchInput = document.getElementById('ingredientSearch');\r\n+    if (searchInput) {\r\n+        searchInput.addEventListener('input', filterIngredients);\r\n+    }\r\n+\r\n+    const categoryFilter = document.getElementById('ingredientCategoryFilter');\r\n+    if (categoryFilter) {\r\n+        categoryFilter.addEventListener('change', filterIngredients);\r\n+    }\r\n+\r\n     loadIngredients();\r\n }\r\n \r\n function loadIngredients() {\r\n-    const table = document.getElementById('ingredientsListTable');\r\n-    if (!table) return;\r\n+    const tableElem = document.getElementById('ingredientsListTable');\r\n+    if (!tableElem) return;\r\n \r\n-    const tbody = table.querySelector('tbody');\r\n-    tbody.innerHTML = `<tr><td colspan=\"6\">Loading...</td></tr>`;\r\n+    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n+    if (!tbody) return;\r\n \r\n+    tbody.innerHTML = '<tr><td colspan=\"6\" class=\"text-center py-4\">Loading...</td></tr>';\r\n+\r\n     setTimeout(() => {\r\n         allIngredients = [\r\n-            { name: 'Beef', quantity: 15, unit: 'kg', status: 'Normal' },\r\n-            { name: 'Chicken', quantity: 8, unit: 'kg', status: 'Low' }\r\n+            { id: 1, name: 'Beef', category: 'Meat', quantity: 15, unit: 'kg', status: 'Normal', minLevel: 5 },\r\n+            { id: 2, name: 'Chicken', category: 'Meat', quantity: 8, unit: 'kg', status: 'Low', minLevel: 10 },\r\n+            { id: 3, name: 'Onions', category: 'Vegetables', quantity: 3, unit: 'kg', status: 'Low', minLevel: 5 },\r\n+            { id: 4, name: 'Cheese', category: 'Dairy', quantity: 4, unit: 'kg', status: 'Low', minLevel: 5 },\r\n+            { id: 5, name: 'Garlic', category: 'Spices', quantity: 1, unit: 'kg', status: 'Low', minLevel: 2 },\r\n+            { id: 6, name: 'Cooking Oil', category: 'Supplies', quantity: 2, unit: 'L', status: 'Low', minLevel: 5 },\r\n+            { id: 7, name: 'Red Wine', category: 'Beverages', quantity: 1, unit: 'bottle', status: 'Low', minLevel: 3 }\r\n         ];\r\n-\r\n-        tbody.innerHTML = allIngredients.map(i => `\r\n-            <tr>\r\n-                <td>${i.name}</td>\r\n-                <td>${i.quantity} ${i.unit}</td>\r\n-                <td>${i.status}</td>\r\n-            </tr>\r\n-        `).join('');\r\n+        displayIngredients(allIngredients);\r\n     }, 500);\r\n }\r\n \r\n-// ===============================\r\n-// RECEIPTS\r\n-// ===============================\r\n+function displayIngredients(ingredients) {\r\n+    const tableElem = document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable');\r\n+    if (!tableElem) return;\r\n+\r\n+    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n+    if (!tbody) return;\r\n+\r\n+    tbody.innerHTML = '';\r\n+    ingredients.forEach(ing => {\r\n+        const row = tbody.insertRow();\r\n+        row.innerHTML = `\r\n+            <td>${ing.name}</td>\r\n+            <td>${ing.category}</td>\r\n+            <td>${ing.quantity} ${ing.unit}</td>\r\n+            <td>${ing.minLevel || '-'}</td>\r\n+            <td><span class=\"badge ${ing.status === 'Normal' ? 'bg-success' : 'bg-warning'}\">${ing.status}</span></td>\r\n+            <td><button class=\"btn btn-sm btn-outline-maroon\" onclick=\"showUpdateModal(${ing.id})\">Update</button></td>\r\n+        `;\r\n+    });\r\n+}\r\n+\r\n+function showUpdateModal(id) {\r\n+    // Logic to show update modal\r\n+    const modal = new bootstrap.Modal(document.getElementById('updateQuantityModal') || document.getElementById('increaseQuantityModal'));\r\n+    modal.show();\r\n+}\r\n+\r\n+function filterIngredients() {\r\n+    const searchTerm = document.getElementById('ingredientSearch')?.value.toLowerCase() || '';\r\n+    const category = document.getElementById('ingredientCategoryFilter')?.value || '';\r\n+\r\n+    const filtered = allIngredients.filter(ing =>\r\n+        ing.name.toLowerCase().includes(searchTerm) &&\r\n+        (category === '' || ing.category === category)\r\n+    );\r\n+    displayIngredients(filtered);\r\n+}\r\n+\r\n+// Receipts Functions\r\n function initializeReceiptsFunctionality() {\r\n+    loadRecentReceipts();\r\n+}\r\n+\r\n+function loadRecentReceipts() {\r\n     const container = document.getElementById('recentReceipts');\r\n     if (!container) return;\r\n-    container.innerHTML = `<div>No recent receipts</div>`;\r\n+\r\n+    container.innerHTML = '<a href=\"#\" class=\"list-group-item list-group-item-action\">No recent receipts</a>';\r\n }\r\n \r\n-// ===============================\r\n-// ACCOUNT\r\n-// ===============================\r\n+// Account Functions\r\n function initializeAccountFunctionality() {\r\n     const form = document.getElementById('changePasswordForm');\r\n-    if (!form) return;\r\n+    if (form) {\r\n+        form.addEventListener('submit', function (e) {\r\n+            e.preventDefault();\r\n+            showModalNotification('Password updated successfully', 'success', 'Account');\r\n+        });\r\n+    }\r\n \r\n-    form.addEventListener('submit', function (e) {\r\n-        e.preventDefault();\r\n-        showModalNotification('Password updated!', 'success', 'Account');\r\n-    });\r\n+    const saveBtn = document.getElementById('saveAccountInfoBtn');\r\n+    if (saveBtn) {\r\n+        saveBtn.addEventListener('click', function (e) {\r\n+            e.preventDefault();\r\n+            saveAccountInfo();\r\n+        });\r\n+    }\r\n }\r\n \r\n-// ===============================\r\n-// ACTIVITY LOG\r\n-// ===============================\r\n+function saveAccountInfo() {\r\n+    showModalNotification('Account information updated successfully', 'success', 'Account');\r\n+}\r\n+\r\n+// Activity Log Functions\r\n function initializeActivityLogFunctionality() {\r\n-    const table = document.getElementById('activityLogTable');\r\n-    if (!table) return;\r\n+    loadActivityLog();\r\n+}\r\n \r\n-    const tbody = table.querySelector('tbody');\r\n-    tbody.innerHTML = `\r\n-        <tr>\r\n-            <td>2023-10-01</td>\r\n-            <td>Logged In</td>\r\n-            <td>Success</td>\r\n-        </tr>\r\n-    `;\r\n+function loadActivityLog() {\r\n+    const tableElem = document.getElementById('activityLogTable');\r\n+    if (!tableElem) return;\r\n+\r\n+    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n+    if (!tbody) return;\r\n+\r\n+    tbody.innerHTML = '<tr><td>2023-10-01</td><td>Logged in</td><td>-</td><td>Success</td></tr>';\r\n }\r\n \r\n-// ===============================\r\n-// Helpers\r\n-// ===============================\r\n+// Helper Functions\r\n function showModalNotification(msg, type, title) {\r\n-    alert(`${title || 'Notification'}: ${msg}`);\r\n+    if (typeof Swal !== 'undefined') {\r\n+        Swal.fire({ title: title || 'Notification', text: msg, icon: type || 'info', confirmButtonColor: '#800000' });\r\n+    } else {\r\n+        alert(`${title}: ${msg}`);\r\n+    }\r\n }\r\n \r\n function showConfirm(msg, callback) {\r\n-    if (confirm(msg) && callback) callback();\r\n-}\r\n+    if (typeof Swal !== 'undefined') {\r\n+        Swal.fire({\r\n+            title: 'Confirm', text: msg, icon: 'question', showCancelButton: true, confirmButtonColor: '#800000'\r\n+        }).then(result => { if (result.isConfirmed && callback) callback(); });\r\n+    } else {\r\n+        if (confirm(msg) && callback) callback();\r\n+    }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1771143342085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -273,17 +273,32 @@\n     loadIngredients();\r\n }\r\n \r\n function loadIngredients() {\r\n+    console.log(\" loadIngredients() called\");\r\n+\r\n     const tableElem = document.getElementById('ingredientsListTable');\r\n-    if (!tableElem) return;\r\n+    console.log(\" ingredientsListTable:\", tableElem);\r\n \r\n+    if (!tableElem) {\r\n+        console.warn(\" Table element not found!\");\r\n+        return;\r\n+    }\r\n+\r\n     const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n-    if (!tbody) return;\r\n+    console.log(\" tbody:\", tbody);\r\n \r\n+    if (!tbody) {\r\n+        console.warn(\" tbody not found inside table!\");\r\n+        return;\r\n+    }\r\n+\r\n+    console.log(\" Showing loading state...\");\r\n     tbody.innerHTML = '<tr><td colspan=\"6\" class=\"text-center py-4\">Loading...</td></tr>';\r\n \r\n     setTimeout(() => {\r\n+        console.log(\" Setting ingredients data...\");\r\n+\r\n         allIngredients = [\r\n             { id: 1, name: 'Beef', category: 'Meat', quantity: 15, unit: 'kg', status: 'Normal', minLevel: 5 },\r\n             { id: 2, name: 'Chicken', category: 'Meat', quantity: 8, unit: 'kg', status: 'Low', minLevel: 10 },\r\n             { id: 3, name: 'Onions', category: 'Vegetables', quantity: 3, unit: 'kg', status: 'Low', minLevel: 5 },\r\n@@ -291,12 +306,18 @@\n             { id: 5, name: 'Garlic', category: 'Spices', quantity: 1, unit: 'kg', status: 'Low', minLevel: 2 },\r\n             { id: 6, name: 'Cooking Oil', category: 'Supplies', quantity: 2, unit: 'L', status: 'Low', minLevel: 5 },\r\n             { id: 7, name: 'Red Wine', category: 'Beverages', quantity: 1, unit: 'bottle', status: 'Low', minLevel: 3 }\r\n         ];\r\n+\r\n+        console.log(\" Ingredients data:\", allIngredients);\r\n+\r\n+        console.log(\" Calling displayIngredients()\");\r\n         displayIngredients(allIngredients);\r\n+\r\n     }, 500);\r\n }\r\n \r\n+\r\n function displayIngredients(ingredients) {\r\n     const tableElem = document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable');\r\n     if (!tableElem) return;\r\n \r\n"
                },
                {
                    "date": 1771143461582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -275,9 +275,10 @@\n \r\n function loadIngredients() {\r\n     console.log(\" loadIngredients() called\");\r\n \r\n-    const tableElem = document.getElementById('ingredientsListTable');\r\n+    const tableElem = document.getElementById('ingredientsListTable')\r\n+;\r\n     console.log(\" ingredientsListTable:\", tableElem);\r\n \r\n     if (!tableElem) {\r\n         console.warn(\" Table element not found!\");\r\n"
                },
                {
                    "date": 1771143482277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -275,10 +275,9 @@\n \r\n function loadIngredients() {\r\n     console.log(\" loadIngredients() called\");\r\n \r\n-    const tableElem = document.getElementById('ingredientsListTable')\r\n-;\r\n+    const tableElem = document.getElementById('ingredientsListTable');\r\n     console.log(\" ingredientsListTable:\", tableElem);\r\n \r\n     if (!tableElem) {\r\n         console.warn(\" Table element not found!\");\r\n"
                },
                {
                    "date": 1771143520010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -275,29 +275,31 @@\n \r\n function loadIngredients() {\r\n     console.log(\" loadIngredients() called\");\r\n \r\n-    const tableElem = document.getElementById('ingredientsListTable');\r\n-    console.log(\" ingredientsListTable:\", tableElem);\r\n+    const tableElem =\r\n+        document.getElementById('ingredientsListTable') ||\r\n+        document.getElementById('ingredientsTable');\r\n \r\n+    console.log(\" Table element found:\", tableElem);\r\n+\r\n     if (!tableElem) {\r\n         console.warn(\" Table element not found!\");\r\n         return;\r\n     }\r\n \r\n-    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n+    const tbody = tableElem.querySelector('tbody');\r\n     console.log(\" tbody:\", tbody);\r\n \r\n     if (!tbody) {\r\n-        console.warn(\" tbody not found inside table!\");\r\n+        console.warn(\" tbody not found!\");\r\n         return;\r\n     }\r\n \r\n-    console.log(\" Showing loading state...\");\r\n     tbody.innerHTML = '<tr><td colspan=\"6\" class=\"text-center py-4\">Loading...</td></tr>';\r\n \r\n     setTimeout(() => {\r\n-        console.log(\" Setting ingredients data...\");\r\n+        console.log(\" Setting ingredient data\");\r\n \r\n         allIngredients = [\r\n             { id: 1, name: 'Beef', category: 'Meat', quantity: 15, unit: 'kg', status: 'Normal', minLevel: 5 },\r\n             { id: 2, name: 'Chicken', category: 'Meat', quantity: 8, unit: 'kg', status: 'Low', minLevel: 10 },\r\n@@ -307,11 +309,8 @@\n             { id: 6, name: 'Cooking Oil', category: 'Supplies', quantity: 2, unit: 'L', status: 'Low', minLevel: 5 },\r\n             { id: 7, name: 'Red Wine', category: 'Beverages', quantity: 1, unit: 'bottle', status: 'Low', minLevel: 3 }\r\n         ];\r\n \r\n-        console.log(\" Ingredients data:\", allIngredients);\r\n-\r\n-        console.log(\" Calling displayIngredients()\");\r\n         displayIngredients(allIngredients);\r\n \r\n     }, 500);\r\n }\r\n"
                }
            ],
            "date": 1771142695876,
            "name": "Commit-0",
            "content": "// Staff Dashboard JavaScript - Updated for Multi-page support\r\n\r\n// Global variables\r\nlet currentSaleItems = [];\r\nlet currentSaleId = null;\r\nlet allMenuItems = [];\r\nlet allIngredients = [];\r\n\r\n// DOM Ready\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    // Initialize tooltips - only if bootstrap is available\r\n    if (typeof bootstrap !== 'undefined') {\r\n        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));\r\n        tooltipTriggerList.map(function (tooltipTriggerEl) {\r\n            return new bootstrap.Tooltip(tooltipTriggerEl);\r\n        });\r\n    }\r\n\r\n    // Initialize only the sections present on the current page\r\n    initializeCommonStaffFeatures();\r\n\r\n    // Auto-initialize based on elements present\r\n    if (document.getElementById('menuItemsGrid')) initializeMenuFunctionality();\r\n    if (document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable')) initializeIngredientsFunctionality();\r\n    if (document.getElementById('recentReceipts')) initializeReceiptsFunctionality();\r\n    if (document.getElementById('changePasswordForm')) initializeAccountFunctionality();\r\n    if (document.getElementById('activityLogTable')) initializeActivityLogFunctionality();\r\n});\r\n\r\n// Aliases for compatibility with separate pages\r\nconst loadMenuItemsData = () => loadMenuItems();\r\nconst loadIngredients = () => initializeIngredientsFunctionality();\r\nconst loadIngredientsData = () => loadIngredients();\r\nconst loadReceipts = () => initializeReceiptsFunctionality();\r\nconst loadRecentReceipts = () => initializeReceiptsFunctionality();\r\nconst loadAccountInfo = () => initializeAccountFunctionality();\r\nconst loadActivityLog = () => initializeActivityLogFunctionality();\r\n\r\n// Common features for all staff pages\r\nfunction initializeCommonStaffFeatures() {\r\n    // Sidebar toggle (global)\r\n    const sidebarToggle = document.getElementById('sidebarToggle');\r\n    const sidebar = document.getElementById('sidebar');\r\n    if (sidebarToggle && sidebar) {\r\n        sidebarToggle.addEventListener('click', function () {\r\n            sidebar.classList.toggle('show');\r\n        });\r\n    }\r\n\r\n    // Logout button (global)\r\n    const logoutBtn = document.getElementById('logoutBtn');\r\n    if (logoutBtn) {\r\n        logoutBtn.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n            showConfirm('Are you sure you want to logout?', function () {\r\n                localStorage.removeItem('loggedInRole');\r\n                window.location.href = 'index.html';\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\n// Menu Sales Functions\r\nfunction initializeMenuFunctionality() {\r\n    // Start new sale button\r\n    const startNewSaleBtn = document.getElementById('startNewSale');\r\n    if (startNewSaleBtn) {\r\n        startNewSaleBtn.addEventListener('click', function () {\r\n            startNewSale();\r\n        });\r\n    }\r\n\r\n    // Record sale button\r\n    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n    if (recordSaleBtn) {\r\n        recordSaleBtn.addEventListener('click', function () {\r\n            showConfirm('Are you sure you want to record this sale?', function () {\r\n                recordSale();\r\n            });\r\n        });\r\n    }\r\n\r\n    // Clear sale button\r\n    const clearSaleBtn = document.getElementById('clearSaleBtn');\r\n    if (clearSaleBtn) {\r\n        clearSaleBtn.addEventListener('click', function () {\r\n            clearCurrentSale();\r\n        });\r\n    }\r\n\r\n    // Load initial data\r\n    loadMenuItems();\r\n}\r\n\r\nfunction loadMenuItems() {\r\n    const menuGrid = document.getElementById('menuItemsGrid');\r\n    if (!menuGrid) return;\r\n\r\n    // Show loading\r\n    menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><div class=\"loading-spinner\"></div><p class=\"mt-2\">Loading menu items...</p></div>';\r\n\r\n    // Simulate API call with delay\r\n    setTimeout(() => {\r\n        allMenuItems = [\r\n            { id: 1, name: 'Beef Steak', category: 'Main Course', image: 'https://images.unsplash.com/photo-1600891964092-4316c288032e?w=400&h=300&fit=crop', available: true, description: 'Grilled beef steak with vegetables' },\r\n            { id: 2, name: 'Chicken Curry', category: 'Main Course', image: 'https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=400&h=300&fit=crop', available: true, description: 'Spicy chicken curry with rice' },\r\n            { id: 3, name: 'Vegetable Salad', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1540420773420-3366772f4999?w=400&h=300&fit=crop', available: true, description: 'Fresh mixed vegetable salad' },\r\n            { id: 4, name: 'Garlic Bread', category: 'Appetizer', image: 'https://images.unsplash.com/photo-1573140247632-f8fd74997d5c?w=400&h=300&fit=crop', available: true, description: 'Toasted bread with garlic butter' },\r\n            { id: 5, name: 'French Fries', category: 'Side Dish', image: 'https://images.unsplash.com/photo-1576107232684-1279f390859f?w=400&h=300&fit=crop', available: true, description: 'Crispy golden french fries' },\r\n            { id: 6, name: 'Grilled Salmon', category: 'Main Course', image: 'https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=400&h=300&fit=crop', available: false, description: 'Fresh grilled salmon with lemon butter sauce' },\r\n            { id: 7, name: 'Pasta Carbonara', category: 'Main Course', image: 'https://images.unsplash.com/photo-1598866594230-a7c12756260f?w=400&h=300&fit=crop', available: true, description: 'Creamy pasta with bacon and cheese' },\r\n            { id: 8, name: 'Chocolate Cake', category: 'Dessert', image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop', available: true, description: 'Rich chocolate cake with frosting' }\r\n        ];\r\n\r\n        displayMenuItems(allMenuItems);\r\n    }, 800);\r\n}\r\n\r\nfunction displayMenuItems(items) {\r\n    const menuGrid = document.getElementById('menuItemsGrid');\r\n    if (!menuGrid) return;\r\n\r\n    menuGrid.innerHTML = '';\r\n\r\n    if (items.length === 0) {\r\n        menuGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><i class=\"fas fa-utensils fa-3x text-muted mb-3\"></i><p class=\"text-muted\">No menu items found</p></div>';\r\n        return;\r\n    }\r\n\r\n    items.forEach(item => {\r\n        const col = document.createElement('div');\r\n        col.className = 'col-lg-3 col-md-4 col-sm-6 mb-4';\r\n\r\n        const imgSrc = item.image || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop';\r\n\r\n        col.innerHTML = `\r\n            <div class=\"menu-item-card ${!item.available ? 'opacity-50' : ''}\">\r\n                <div class=\"position-relative\">\r\n                    <img src=\"${imgSrc}\" alt=\"${item.name}\" class=\"menu-item-img\" onerror=\"this.src='https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop'\">\r\n                    <span class=\"menu-item-badge badge ${item.available ? 'bg-green' : 'bg-secondary'}\">\r\n                        ${item.available ? 'Available' : 'Out of Stock'}\r\n                    </span>\r\n                </div>\r\n                <div class=\"p-3\">\r\n                    <h5 class=\"card-title text-maroon\">${item.name}</h5>\r\n                    <p class=\"card-text text-muted small\">${item.category}</p>\r\n                    <p class=\"card-text small mb-3\">${item.description}</p>\r\n                    ${item.available ?\r\n                `<button class=\"btn btn-sm btn-maroon w-100 add-to-sale\" data-id=\"${item.id}\" data-name=\"${item.name}\">\r\n                            <i class=\"fas fa-cart-plus me-1\"></i> Add to Sale\r\n                        </button>` :\r\n                `<button class=\"btn btn-sm btn-secondary w-100\" disabled>Unavailable</button>`\r\n            }\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        menuGrid.appendChild(col);\r\n    });\r\n\r\n    // Add event listeners to add-to-sale buttons\r\n    document.querySelectorAll('.add-to-sale').forEach(button => {\r\n        button.addEventListener('click', function () {\r\n            const itemId = this.getAttribute('data-id');\r\n            const itemName = this.getAttribute('data-name');\r\n            addItemToSale(itemId, itemName);\r\n        });\r\n    });\r\n}\r\n\r\nfunction filterMenuItems() {\r\n    const searchTerm = document.getElementById('menuSearch')?.value.toLowerCase() || '';\r\n    const category = document.getElementById('menuCategoryFilter')?.value || '';\r\n\r\n    const filtered = allMenuItems.filter(item =>\r\n        item.name.toLowerCase().includes(searchTerm) &&\r\n        (category === '' || item.category === category)\r\n    );\r\n    displayMenuItems(filtered);\r\n}\r\n\r\nfunction startNewSale() {\r\n    currentSaleItems = [];\r\n    currentSaleId = 'SALE-' + Date.now();\r\n    updateSaleDisplay();\r\n    showModalNotification('New sale started', 'success', 'Sale Started');\r\n}\r\n\r\nfunction addItemToSale(itemId, itemName) {\r\n    const existingItem = currentSaleItems.find(item => item.id === itemId);\r\n    if (existingItem) {\r\n        existingItem.quantity += 1;\r\n    } else {\r\n        currentSaleItems.push({ id: itemId, name: itemName, quantity: 1 });\r\n    }\r\n    updateSaleDisplay();\r\n    showModalNotification(`${itemName} added to sale`, 'success', 'Item Added');\r\n}\r\n\r\nfunction updateSaleDisplay() {\r\n    const saleItemsContainer = document.getElementById('saleItems');\r\n    const totalItemsCount = document.getElementById('totalItemsCount');\r\n    const recordSaleBtn = document.getElementById('recordSaleBtn');\r\n\r\n    if (!saleItemsContainer) return;\r\n\r\n    if (currentSaleItems.length === 0) {\r\n        saleItemsContainer.innerHTML = '<p class=\"text-muted text-center py-3\">No items added to sale yet.</p>';\r\n        if (totalItemsCount) totalItemsCount.textContent = '0';\r\n        if (recordSaleBtn) recordSaleBtn.disabled = true;\r\n        return;\r\n    }\r\n\r\n    let totalItems = 0;\r\n    let itemsHtml = '';\r\n\r\n    currentSaleItems.forEach((item, index) => {\r\n        totalItems += item.quantity;\r\n        itemsHtml += `\r\n            <div class=\"sale-item d-flex justify-content-between align-items-center mb-2 p-2 border-bottom\">\r\n                <div>\r\n                    <h6 class=\"mb-0\">${item.name}</h6>\r\n                    <small class=\"text-muted\">ID: ${item.id}</small>\r\n                </div>\r\n                <div class=\"d-flex align-items-center\">\r\n                    <span class=\"badge bg-maroon me-2\">${item.quantity}</span>\r\n                    <button class=\"btn btn-outline-danger btn-sm\" onclick=\"removeSaleItem(${index})\">\r\n                        <i class=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        `;\r\n    });\r\n\r\n    saleItemsContainer.innerHTML = itemsHtml;\r\n    if (totalItemsCount) totalItemsCount.textContent = totalItems;\r\n    if (recordSaleBtn) recordSaleBtn.disabled = false;\r\n}\r\n\r\nfunction removeSaleItem(index) {\r\n    currentSaleItems.splice(index, 1);\r\n    updateSaleDisplay();\r\n}\r\n\r\nfunction clearCurrentSale() {\r\n    currentSaleItems = [];\r\n    updateSaleDisplay();\r\n}\r\n\r\nfunction recordSale() {\r\n    if (currentSaleItems.length === 0) return;\r\n\r\n    showModalNotification('Recording sale...', 'info', 'Processing');\r\n    setTimeout(() => {\r\n        showModalNotification('Sale recorded successfully!', 'success', 'Success');\r\n        clearCurrentSale();\r\n    }, 1000);\r\n}\r\n\r\n// Ingredients Functions\r\nfunction initializeIngredientsFunctionality() {\r\n    const searchInput = document.getElementById('ingredientSearch');\r\n    if (searchInput) {\r\n        searchInput.addEventListener('input', filterIngredients);\r\n    }\r\n\r\n    const categoryFilter = document.getElementById('ingredientCategoryFilter');\r\n    if (categoryFilter) {\r\n        categoryFilter.addEventListener('change', filterIngredients);\r\n    }\r\n\r\n    loadIngredients();\r\n}\r\n\r\nfunction loadIngredients() {\r\n    const tableElem = document.getElementById('ingredientsListTable');\r\n    if (!tableElem) return;\r\n\r\n    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n    if (!tbody) return;\r\n\r\n    tbody.innerHTML = '<tr><td colspan=\"6\" class=\"text-center py-4\">Loading...</td></tr>';\r\n\r\n    setTimeout(() => {\r\n        allIngredients = [\r\n            { id: 1, name: 'Beef', category: 'Meat', quantity: 15, unit: 'kg', status: 'Normal', minLevel: 5 },\r\n            { id: 2, name: 'Chicken', category: 'Meat', quantity: 8, unit: 'kg', status: 'Low', minLevel: 10 },\r\n            { id: 3, name: 'Onions', category: 'Vegetables', quantity: 3, unit: 'kg', status: 'Low', minLevel: 5 },\r\n            { id: 4, name: 'Cheese', category: 'Dairy', quantity: 4, unit: 'kg', status: 'Low', minLevel: 5 },\r\n            { id: 5, name: 'Garlic', category: 'Spices', quantity: 1, unit: 'kg', status: 'Low', minLevel: 2 },\r\n            { id: 6, name: 'Cooking Oil', category: 'Supplies', quantity: 2, unit: 'L', status: 'Low', minLevel: 5 },\r\n            { id: 7, name: 'Red Wine', category: 'Beverages', quantity: 1, unit: 'bottle', status: 'Low', minLevel: 3 }\r\n        ];\r\n        displayIngredients(allIngredients);\r\n    }, 500);\r\n}\r\n\r\nfunction displayIngredients(ingredients) {\r\n    const tableElem = document.getElementById('ingredientsListTable') || document.getElementById('ingredientsTable');\r\n    if (!tableElem) return;\r\n\r\n    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n    if (!tbody) return;\r\n\r\n    tbody.innerHTML = '';\r\n    ingredients.forEach(ing => {\r\n        const row = tbody.insertRow();\r\n        row.innerHTML = `\r\n            <td>${ing.name}</td>\r\n            <td>${ing.category}</td>\r\n            <td>${ing.quantity} ${ing.unit}</td>\r\n            <td>${ing.minLevel || '-'}</td>\r\n            <td><span class=\"badge ${ing.status === 'Normal' ? 'bg-success' : 'bg-warning'}\">${ing.status}</span></td>\r\n            <td><button class=\"btn btn-sm btn-outline-maroon\" onclick=\"showUpdateModal(${ing.id})\">Update</button></td>\r\n        `;\r\n    });\r\n}\r\n\r\nfunction showUpdateModal(id) {\r\n    // Logic to show update modal\r\n    const modal = new bootstrap.Modal(document.getElementById('updateQuantityModal') || document.getElementById('increaseQuantityModal'));\r\n    modal.show();\r\n}\r\n\r\nfunction filterIngredients() {\r\n    const searchTerm = document.getElementById('ingredientSearch')?.value.toLowerCase() || '';\r\n    const category = document.getElementById('ingredientCategoryFilter')?.value || '';\r\n\r\n    const filtered = allIngredients.filter(ing =>\r\n        ing.name.toLowerCase().includes(searchTerm) &&\r\n        (category === '' || ing.category === category)\r\n    );\r\n    displayIngredients(filtered);\r\n}\r\n\r\n// Receipts Functions\r\nfunction initializeReceiptsFunctionality() {\r\n    loadRecentReceipts();\r\n}\r\n\r\nfunction loadRecentReceipts() {\r\n    const container = document.getElementById('recentReceipts');\r\n    if (!container) return;\r\n\r\n    container.innerHTML = '<a href=\"#\" class=\"list-group-item list-group-item-action\">No recent receipts</a>';\r\n}\r\n\r\n// Account Functions\r\nfunction initializeAccountFunctionality() {\r\n    const form = document.getElementById('changePasswordForm');\r\n    if (form) {\r\n        form.addEventListener('submit', function (e) {\r\n            e.preventDefault();\r\n            showModalNotification('Password updated successfully', 'success', 'Account');\r\n        });\r\n    }\r\n\r\n    const saveBtn = document.getElementById('saveAccountInfoBtn');\r\n    if (saveBtn) {\r\n        saveBtn.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n            saveAccountInfo();\r\n        });\r\n    }\r\n}\r\n\r\nfunction saveAccountInfo() {\r\n    showModalNotification('Account information updated successfully', 'success', 'Account');\r\n}\r\n\r\n// Activity Log Functions\r\nfunction initializeActivityLogFunctionality() {\r\n    loadActivityLog();\r\n}\r\n\r\nfunction loadActivityLog() {\r\n    const tableElem = document.getElementById('activityLogTable');\r\n    if (!tableElem) return;\r\n\r\n    const tbody = tableElem.getElementsByTagName('tbody')[0];\r\n    if (!tbody) return;\r\n\r\n    tbody.innerHTML = '<tr><td>2023-10-01</td><td>Logged in</td><td>-</td><td>Success</td></tr>';\r\n}\r\n\r\n// Helper Functions\r\nfunction showModalNotification(msg, type, title) {\r\n    if (typeof Swal !== 'undefined') {\r\n        Swal.fire({ title: title || 'Notification', text: msg, icon: type || 'info', confirmButtonColor: '#800000' });\r\n    } else {\r\n        alert(`${title}: ${msg}`);\r\n    }\r\n}\r\n\r\nfunction showConfirm(msg, callback) {\r\n    if (typeof Swal !== 'undefined') {\r\n        Swal.fire({\r\n            title: 'Confirm', text: msg, icon: 'question', showCancelButton: true, confirmButtonColor: '#800000'\r\n        }).then(result => { if (result.isConfirmed && callback) callback(); });\r\n    } else {\r\n        if (confirm(msg) && callback) callback();\r\n    }\r\n}"
        }
    ]
}