<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Restaurant POS</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-black fixed-top shadow">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="resources/ethans logo.jpg" alt="Logo" height="60" class="me-2">
                <span class="fw-bold">Restaurant POS</span>
                <span class="badge bg-danger ms-2">Admin</span>
            </a>
            
            <!-- Mobile Toggle -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Nav Items -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-page="dashboard">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-utensils me-1"></i>Menu & Recipe
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-page="menu-control">Menu Items</a></li>
                            <li><a class="dropdown-item" href="#" data-page="recipe-control">Recipe Control</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="ingredients-masterlist">
                            <i class="fas fa-boxes me-1"></i>Ingredients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="user-management">
                            <i class="fas fa-users me-1"></i>Users
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-chart-bar me-1"></i>Reports
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-page="reports">Owner Reports</a></li>
                            <li><a class="dropdown-item" href="#" data-page="backup">Backup & Restore</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="requests">
                            <i class="fas fa-inbox me-1"></i>Requests
                            <span class="badge bg-danger" id="pendingRequestsBadge">0</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cog me-1"></i>Settings
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" data-page="system-settings"><i class="fas fa-sliders-h me-2"></i>System Settings</a></li>
                            <li><a class="dropdown-item" href="#" data-page="activity-log"><i class="fas fa-history me-2"></i>Activity Log</a></li>
                            <li><a class="dropdown-item" href="#" data-page="temp-account"><i class="fas fa-user-clock me-2"></i>Temporary Staff Account</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div class="container-fluid mt-5 pt-4">
        <div class="row">
            <!-- Main Content Area -->
            <main class="col-12 px-md-4 animate__animated animate__fadeIn">
                <!-- Dashboard Content -->
                <div id="dashboard-content" class="page-content">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-tachometer-alt me-2 text-danger"></i>Admin Dashboard</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button class="btn btn-sm btn-outline-danger" id="refreshAdminDashboard">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="btn btn-sm btn-outline-success" id="exportDashboardData">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Info Boxes -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card info-card border-left-danger shadow h-100 py-2 animate__animated animate__fadeInLeft">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                Low Stock Report
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="ingredientsRestock">0</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-exclamation-triangle fa-2x text-danger"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card info-card border-left-warning shadow h-100 py-2 animate__animated animate__fadeInLeft">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                Total Staff Accounts
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="totalStaffAccounts">0</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-users fa-2x text-warning"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card info-card border-left-success shadow h-100 py-2 animate__animated animate__fadeInRight">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                Total Sales Records
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="totalSalesRecords">0</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clipboard-list fa-2x text-success"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card info-card border-left-info shadow h-100 py-2 animate__animated animate__fadeInRight">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                System Alerts
                                            </div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800" id="systemAlerts">0</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bell fa-2x text-info"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Summary Sections -->
                    <div class="row">
                        <!-- Low Stock Ingredients -->
                        <div class="col-xl-6 col-lg-12 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-black text-white d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-exclamation-circle me-1"></i>Low-stock Ingredients Overview
                                    </h6>
                                    <button class="btn btn-sm btn-outline-warning" id="refreshLowStock">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="lowStockTable">
                                            <thead>
                                                <tr>
                                                    <th>Ingredient</th>
                                                    <th>Category</th>
                                                    <th>Current Qty</th>
                                                    <th>Threshold</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">Loading data...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="text-end mt-3">
                                        <a href="#" class="btn btn-sm btn-warning" data-page="ingredients-masterlist">
                                            <i class="fas fa-boxes me-1"></i> Manage Ingredients
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent System Activities -->
                        <div class="col-xl-6 col-lg-12 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-history me-1"></i>Recent System Activities (Admin Level)
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="activity-timeline" id="recentActivities">
                                        <div class="text-center py-4">
                                            <div class="loading-spinner"></div>
                                            <p class="mt-2">Loading activities...</p>
                                        </div>
                                    </div>
                                    <div class="text-end mt-3">
                                        <a href="#" class="btn btn-sm btn-info" data-page="activity-log">
                                            <i class="fas fa-list-alt me-1"></i> View Full Log
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-bolt me-1"></i>Quick Actions
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-danger btn-lg w-100 h-100" data-page="requests">
                                                <i class="fas fa-inbox fa-2x mb-2"></i><br>
                                                <small>Review Requests</small>
                                            </button>
                                        </div>
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-success btn-lg w-100 h-100" data-page="menu-control">
                                                <i class="fas fa-plus-circle fa-2x mb-2"></i><br>
                                                <small>Add Menu Item</small>
                                            </button>
                                        </div>
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-warning btn-lg w-100 h-100" data-page="user-management">
                                                <i class="fas fa-users fa-2x mb-2"></i><br>
                                                <small>Manage Users</small>
                                            </button>
                                        </div>
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-info btn-lg w-100 h-100" id="generateReportBtn">
                                                <i class="fas fa-file-pdf fa-2x mb-2"></i><br>
                                                <small>Generate Report</small>
                                            </button>
                                        </div>
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-primary btn-lg w-100 h-100" data-page="backup">
                                                <i class="fas fa-database fa-2x mb-2"></i><br>
                                                <small>Backup Data</small>
                                            </button>
                                        </div>
                                        <div class="col-md-2 col-sm-4 col-6 mb-3">
                                            <button class="btn btn-outline-secondary btn-lg w-100 h-100" data-page="system-settings">
                                                <i class="fas fa-cogs fa-2x mb-2"></i><br>
                                                <small>Settings</small>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Menu Control Content -->
                <div id="menu-control-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-utensils me-2 text-danger"></i>Menu Control</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger me-2" id="addMenuItemBtn">
                                <i class="fas fa-plus-circle me-1"></i> Add Menu Item
                            </button>
                        </div>
                    </div>
                    
                    <!-- Menu Items List -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-list me-1"></i>Menu Items List
                                    </h6>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="showInactiveItems">
                                        <label class="form-check-label text-white" for="showInactiveItems">Show Inactive</label>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="menuControlTable">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Menu Item</th>
                                                    <th>Category</th>
                                                    <th>Price (Reference)</th>
                                                    <th>Status</th>
                                                    <th>Recipes</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="7" class="text-center">Loading menu items...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recipe Control Content -->
                <div id="recipe-control-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-book me-2 text-danger"></i>Recipe Control</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-success me-2" id="assignRecipeBtn">
                                <i class="fas fa-link me-1"></i> Assign Recipe
                            </button>
                        </div>
                    </div>
                    
                    <!-- Recipe Mapping -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-table me-1"></i>Recipe Mapping Table
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="recipeMappingTable">
                                            <thead>
                                                <tr>
                                                    <th>Menu Item</th>
                                                    <th>Ingredients Used</th>
                                                    <th>Quantity per Sale</th>
                                                    <th>Total Cost</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">Loading recipe mappings...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ingredients Masterlist Content -->
                <div id="ingredients-masterlist-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-boxes me-2 text-danger"></i>Ingredients Masterlist</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger me-2" id="addIngredientBtn">
                                <i class="fas fa-plus-circle me-1"></i> Add Ingredient
                            </button>
                            <button class="btn btn-warning me-2" id="setThresholdsBtn">
                                <i class="fas fa-sliders-h me-1"></i> Set Thresholds
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ingredients Masterlist -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-list-alt me-1"></i>Ingredients Masterlist
                                    </h6>
                                    <div class="text-warning">
                                        <i class="fas fa-exclamation-circle me-1"></i>
                                        <span id="masterLowStockCount">0</span> items below threshold
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="ingredientsMasterTable">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Ingredient Name</th>
                                                    <th>Category</th>
                                                    <th>Unit</th>
                                                    <th>Current Quantity</th>
                                                    <th>Low-stock Threshold</th>
                                                    <th>Status</th>
                                                    <th>Used In</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="9" class="text-center">Loading ingredients masterlist...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User Management Content -->
                <div id="user-management-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-users me-2 text-danger"></i>User Management</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger me-2" id="addUserBtn">
                                <i class="fas fa-user-plus me-1"></i> Add User
                            </button>
                        </div>
                    </div>
                    
                    <!-- User Management Tabs -->
                    <ul class="nav nav-tabs mb-4" id="userManagementTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="active-users-tab" data-bs-toggle="tab" data-bs-target="#active-users">
                                Active Users
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="deleted-users-tab" data-bs-toggle="tab" data-bs-target="#deleted-users">
                                Deleted Users <span class="badge bg-secondary" id="deletedUsersCount">0</span>
                            </button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="userManagementTabContent">
                        <!-- Active Users -->
                        <div class="tab-pane fade show active" id="active-users" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-success text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-user-check me-1"></i>Active Users List
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="activeUsersTable">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Role</th>
                                                    <th>Username</th>
                                                    <th>Status</th>
                                                    <th>Last Login</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="6" class="text-center">Loading active users...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Deleted Users -->
                        <div class="tab-pane fade" id="deleted-users" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-secondary text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-user-slash me-1"></i>Deleted Users (Can Be Restored)
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="deletedUsersTable">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Role</th>
                                                    <th>Username</th>
                                                    <th>Deleted Date</th>
                                                    <th>Deleted By</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="6" class="text-center">No deleted users found</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="alert alert-info mt-3">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Note:</strong> Deleted users can be restored until permanently deleted from this table.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reports Content -->
                <div id="reports-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-chart-bar me-2 text-danger"></i>Owner Reports</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger me-2" id="generatePdfReport">
                                <i class="fas fa-file-pdf me-1"></i> Generate PDF
                            </button>
                        </div>
                    </div>
                    
                    <!-- Report Filters -->
                    <div class="row mb-4">
                        <div class="col-lg-8">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-filter me-1"></i>Report Filters
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Report Type</label>
                                            <select class="form-select" id="reportType">
                                                <option value="daily-sales">Daily Sales Summary</option>
                                                <option value="ingredient-usage">Ingredient Usage Report</option>
                                                <option value="low-stock">Low Stock History Report</option>
                                                <option value="staff-activity">Staff Activity Summary</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Date Range</label>
                                            <div class="input-group">
                                                <input type="date" class="form-control" id="reportStartDate">
                                                <span class="input-group-text">to</span>
                                                <input type="date" class="form-control" id="reportEndDate">
                                            </div>
                                            <div class="form-text">Leave empty for all dates</div>
                                        </div>
                                        <div class="col-12">
                                            <button class="btn btn-danger w-100" id="applyReportFilters">
                                                <i class="fas fa-chart-line me-1"></i> Generate Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-info-circle me-1"></i>Report Information
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="small">
                                        <i class="fas fa-exclamation-triangle text-warning me-1"></i>
                                        Reports contain quantity-based data only. No revenue or profit information is included.
                                    </p>
                                    <p class="small">
                                        <i class="fas fa-print text-info me-1"></i>
                                        All reports can be printed as PDF documents.
                                    </p>
                                    <div class="alert alert-info mt-3">
                                        <i class="fas fa-database me-2"></i>
                                        <strong>Note:</strong> Reports are generated from local data only.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Report Preview -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-eye me-1"></i>Report Preview
                                    </h6>
                                    <button class="btn btn-sm btn-outline-light" id="printReportPreview">
                                        <i class="fas fa-print"></i> Print
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="report-preview" id="reportPreview">
                                        <div class="text-center py-5">
                                            <i class="fas fa-chart-bar fa-3x text-muted mb-3"></i>
                                            <h4 class="text-muted">No Report Generated</h4>
                                            <p class="text-muted">Select report type and click "Generate Report" to preview</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Backup & Restore Content -->
                <div id="backup-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-database me-2 text-danger"></i>Backup & Restore</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-success me-2" id="createBackupBtn">
                                <i class="fas fa-save me-1"></i> Create Backup
                            </button>
                        </div>
                    </div>
                    
                    <!-- Backup Options -->
                    <div class="row mb-4">
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-success text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-save me-1"></i>Inventory Backup
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="card-text">Create a backup of all inventory data including ingredients, quantities, and thresholds.</p>
                                    <button class="btn btn-success w-100" data-backup-type="inventory">
                                        <i class="fas fa-download me-1"></i> Backup Inventory
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-warning text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-receipt me-1"></i>Sales Records Backup
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="card-text">Backup all sales records and receipts. This does not include financial data.</p>
                                    <button class="btn btn-warning w-100" data-backup-type="sales">
                                        <i class="fas fa-download me-1"></i> Backup Sales
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-info text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-users me-1"></i>User Accounts Backup
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="card-text">Backup all staff/cashier user accounts and settings.</p>
                                    <button class="btn btn-info w-100" data-backup-type="users">
                                        <i class="fas fa-download me-1"></i> Backup Users
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Restore Options -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-danger text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-upload me-1"></i>Restore Data
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-warning">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        <strong>Warning:</strong> Restoring data will overwrite existing data. Make sure you have a current backup.
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Select Backup File</label>
                                        <input type="file" class="form-control" id="backupFile" accept=".json">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Restore Type</label>
                                        <select class="form-select" id="restoreType">
                                            <option value="inventory">Inventory Data</option>
                                            <option value="sales">Sales Records</option>
                                            <option value="users">User Accounts</option>
                                            <option value="all">All Data (Complete Restore)</option>
                                        </select>
                                    </div>
                                    
                                    <button class="btn btn-danger w-100" id="restoreBackupBtn" disabled>
                                        <i class="fas fa-upload me-1"></i> Restore Backup
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Existing Backups -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-history me-1"></i>Existing Backups
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="backupsTable">
                                            <thead>
                                                <tr>
                                                    <th>Backup Name</th>
                                                    <th>Type</th>
                                                    <th>Date Created</th>
                                                    <th>Size</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">No backups found</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Requests Content -->
                <div id="requests-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-inbox me-2 text-danger"></i>Requests</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-outline-danger" id="refreshRequests">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <!-- Request Tabs -->
                    <ul class="nav nav-tabs mb-4" id="requestsTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="account-tab" data-bs-toggle="tab" data-bs-target="#account-requests">
                                Account Requests <span class="badge bg-danger" id="accountRequestsCount">0</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="role-tab" data-bs-toggle="tab" data-bs-target="#role-requests">
                                Role Change Requests <span class="badge bg-warning" id="roleRequestsCount">0</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="ingredient-tab" data-bs-toggle="tab" data-bs-target="#ingredient-requests">
                                Ingredient Deletion <span class="badge bg-info" id="ingredientRequestsCount">0</span>
                            </button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="requestsTabContent">
                        <!-- Account Requests -->
                        <div class="tab-pane fade show active" id="account-requests" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-success text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-user-plus me-1"></i>Pending Account Requests
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="accountRequestsTable">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Full Name</th>
                                                    <th>Username</th>
                                                    <th>Requested Role</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">No pending account requests</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Role Change Requests -->
                        <div class="tab-pane fade" id="role-requests" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-warning text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-user-tag me-1"></i>Role Change Requests
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="roleRequestsTable">
                                            <thead>
                                                <tr>
                                                    <th>Staff Name</th>
                                                    <th>Current Role</th>
                                                    <th>Requested Role</th>
                                                    <th>Request Date</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">No role change requests</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ingredient Deletion Requests -->
                        <div class="tab-pane fade" id="ingredient-requests" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-info text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-trash-alt me-1"></i>Ingredient Deletion Requests
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="ingredientRequestsTable">
                                            <thead>
                                                <tr>
                                                    <th>Ingredient</th>
                                                    <th>Category</th>
                                                    <th>Current Quantity</th>
                                                    <th>Reason</th>
                                                    <th>Requested By</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="6" class="text-center">No ingredient deletion requests</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- System Settings Content -->
                <div id="system-settings-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-cog me-2 text-danger"></i>System Settings</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger" id="saveSettingsBtn">
                                <i class="fas fa-save me-1"></i> Save Settings
                            </button>
                        </div>
                    </div>
                    
                    <!-- Settings Tabs -->
                    <ul class="nav nav-tabs mb-4" id="settingsTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general-settings">
                                General Settings
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="modules-tab" data-bs-toggle="tab" data-bs-target="#module-settings">
                                Module Control
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security-settings">
                                Security
                            </button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="settingsTabContent">
                        <!-- General Settings -->
                        <div class="tab-pane fade show active" id="general-settings" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-sliders-h me-1"></i>General System Settings
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <form id="generalSettingsForm">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Cafe/Restaurant Name</label>
                                                <input type="text" class="form-control" id="cafeName" value="Restaurant POS" readonly>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Default Low-stock Threshold</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="defaultThreshold" value="5" min="1">
                                                    <span class="input-group-text">units</span>
                                                </div>
                                                <div class="form-text">Default threshold applied to new ingredients</div>
                                            </div>
                                            <div class="col-12 mb-3">
                                                <label class="form-label">Receipt Footer Message</label>
                                                <textarea class="form-control" id="receiptFooter" rows="3">Thank you for your order! Payment handled outside the system.</textarea>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Auto-logout After Inactivity</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="autoLogoutMinutes" value="30" min="1">
                                                    <span class="input-group-text">minutes</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label class="form-label">Default Date Format</label>
                                                <select class="form-select" id="dateFormat">
                                                    <option value="mm/dd/yyyy">MM/DD/YYYY</option>
                                                    <option value="dd/mm/yyyy">DD/MM/YYYY</option>
                                                    <option value="yyyy-mm-dd">YYYY-MM-DD</option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Module Control -->
                        <div class="tab-pane fade" id="module-settings" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-puzzle-piece me-1"></i>Module Control
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleSales" checked>
                                                <label class="form-check-label" for="moduleSales">
                                                    <strong>Sales Module</strong>
                                                    <p class="small text-muted mb-0">Enable/disable sales recording functionality</p>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleInventory" checked>
                                                <label class="form-check-label" for="moduleInventory">
                                                    <strong>Inventory Module</strong>
                                                    <p class="small text-muted mb-0">Enable/disable inventory management</p>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleReports" checked>
                                                <label class="form-check-label" for="moduleReports">
                                                    <strong>Reports Module</strong>
                                                    <p class="small text-muted mb-0">Enable/disable report generation</p>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleRequests" checked>
                                                <label class="form-check-label" for="moduleRequests">
                                                    <strong>Requests Module</strong>
                                                    <p class="small text-muted mb-0">Enable/disable request system</p>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleBackup" checked>
                                                <label class="form-check-label" for="moduleBackup">
                                                    <strong>Backup Module</strong>
                                                    <p class="small text-muted mb-0">Enable/disable backup functionality</p>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="moduleTempAccount" checked>
                                                <label class="form-check-label" for="moduleTempAccount">
                                                    <strong>Temporary Staff Account</strong>
                                                    <p class="small text-muted mb-0">Enable/disable temporary staff feature</p>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Settings -->
                        <div class="tab-pane fade" id="security-settings" role="tabpanel">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-shield-alt me-1"></i>Security Settings
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Failed Login Attempts Before Lockout</label>
                                            <select class="form-select" id="maxLoginAttempts">
                                                <option value="3">3 attempts</option>
                                                <option value="5" selected>5 attempts</option>
                                                <option value="10">10 attempts</option>
                                                <option value="0">No lockout</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Account Lockout Duration</label>
                                            <select class="form-select" id="lockoutDuration">
                                                <option value="15">15 minutes</option>
                                                <option value="30" selected>30 minutes</option>
                                                <option value="60">1 hour</option>
                                                <option value="1440">24 hours</option>
                                            </select>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="enableAuditLog" checked>
                                                <label class="form-check-label" for="enableAuditLog">
                                                    Enable Audit Logging
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="requireStrongPasswords" checked>
                                                <label class="form-check-label" for="requireStrongPasswords">
                                                    Require Strong Passwords (min. 8 chars, mixed case, numbers)
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="alert alert-info">
                                                <i class="fas fa-info-circle me-2"></i>
                                                <strong>Security Note:</strong> All passwords are stored securely (hashed). Owner/admin accounts cannot be self-deleted.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Activity Log Content -->
                <div id="activity-log-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-history me-2 text-danger"></i>Full Activity Log</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button class="btn btn-sm btn-outline-danger" id="exportActivityLog">
                                    <i class="fas fa-download"></i> Export
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" id="clearOldLogs">
                                    <i class="fas fa-trash"></i> Clear Old
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Activity Log Filters -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-filter me-1"></i>Filter Activity Log
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <label class="form-label">User</label>
                                            <select class="form-select" id="filterUser">
                                                <option value="">All Users</option>
                                                <option value="admin">Admin</option>
                                                <option value="owner">Owner</option>
                                                <option value="staff">Staff</option>
                                                <option value="cashier">Cashier</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">Action Type</label>
                                            <select class="form-select" id="filterAction">
                                                <option value="">All Actions</option>
                                                <option value="login">Login/Logout</option>
                                                <option value="sale">Sales</option>
                                                <option value="inventory">Inventory</option>
                                                <option value="settings">Settings</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">Date From</label>
                                            <input type="date" class="form-control" id="filterDateFrom">
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">Date To</label>
                                            <input type="date" class="form-control" id="filterDateTo">
                                        </div>
                                        <div class="col-12">
                                            <button class="btn btn-danger w-100" id="applyActivityFilter">
                                                <i class="fas fa-filter me-1"></i> Apply Filters
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Activity Log Table -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-list-alt me-1"></i>Complete Activity Log
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="fullActivityLogTable">
                                            <thead>
                                                <tr>
                                                    <th>Date & Time</th>
                                                    <th>User</th>
                                                    <th>Role</th>
                                                    <th>Action</th>
                                                    <th>Reference</th>
                                                    <th>Status</th>
                                                    <th>IP Address</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="7" class="text-center">Loading activity log...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="alert alert-info mt-3">
                                        <i class="fas fa-info-circle me-2"></i>
                                        <strong>Note:</strong> This log includes ALL system activities, including "Owner acting as staff" actions from temporary accounts.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Temporary Staff Account Content -->
                <div id="temp-account-content" class="page-content d-none">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2"><i class="fas fa-user-clock me-2 text-danger"></i>Temporary Staff Account</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button class="btn btn-danger me-2" id="activateTempAccountBtn">
                                <i class="fas fa-play-circle me-1"></i> Activate Temporary Account
                            </button>
                        </div>
                    </div>
                    
                    <!-- Temporary Account Status -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-info-circle me-1"></i>Temporary Account Status
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h4 id="tempAccountStatus" class="text-warning">Inactive</h4>
                                            <p class="mb-0">The temporary staff account allows the owner/admin to perform staff duties while maintaining full logging and accountability.</p>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="btn-group">
                                                <button class="btn btn-lg btn-danger" id="toggleTempAccount">
                                                    <i class="fas fa-power-off me-2"></i> Activate
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Temporary Account Features -->
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-success text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-cash-register me-1"></i>Record Sales
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p>Record sales transactions just like a regular staff member.</p>
                                    <ul class="small">
                                        <li>Select menu items</li>
                                        <li>Enter quantities</li>
                                        <li>Generate receipts</li>
                                    </ul>
                                    <button class="btn btn-success w-100" id="tempRecordSale" disabled>
                                        <i class="fas fa-utensils me-1"></i> Record Sale
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-warning text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-boxes me-1"></i>Adjust Stock
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p>Increase or decrease ingredient quantities for stock management.</p>
                                    <ul class="small">
                                        <li>Increase for deliveries</li>
                                        <li>Decrease for wastage</li>
                                        <li>Full logging maintained</li>
                                    </ul>
                                    <button class="btn btn-warning w-100" id="tempAdjustStock" disabled>
                                        <i class="fas fa-edit me-1"></i> Adjust Stock
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card shadow h-100">
                                <div class="card-header bg-info text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-print me-1"></i>Print Receipts
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p>Generate and print receipts for completed sales.</p>
                                    <ul class="small">
                                        <li>Proof of order only</li>
                                        <li>No payment processing</li>
                                        <li>Standard receipt format</li>
                                    </ul>
                                    <button class="btn btn-info w-100" id="tempPrintReceipt" disabled>
                                        <i class="fas fa-receipt me-1"></i> Print Receipt
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Temporary Account Log -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow">
                                <div class="card-header bg-black text-white">
                                    <h6 class="m-0 font-weight-bold">
                                        <i class="fas fa-history me-1"></i>Temporary Account Activity Log
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="tempAccountLogTable">
                                            <thead>
                                                <tr>
                                                    <th>Date & Time</th>
                                                    <th>Action</th>
                                                    <th>Reference</th>
                                                    <th>Status</th>
                                                    <th>Flag</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">No temporary account activity recorded</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="alert alert-warning mt-3">
                                        <i class="fas fa-exclamation-circle me-2"></i>
                                        <strong>Note:</strong> All actions performed via the temporary account are flagged as "Owner acting as staff" in the activity log.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal fade" id="addMenuItemModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-plus-circle me-2"></i>Add Menu Item
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addMenuItemForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="menuItemName" class="form-label">Menu Item Name</label>
                                <input type="text" class="form-control" id="menuItemName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="menuItemCategory" class="form-label">Category</label>
                                <select class="form-select" id="menuItemCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="Main Course">Main Course</option>
                                    <option value="Appetizer">Appetizer</option>
                                    <option value="Side Dish">Side Dish</option>
                                    <option value="Dessert">Dessert</option>
                                    <option value="Beverage">Beverage</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="menuItemPrice" class="form-label">Price (Reference Only)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="menuItemPrice" min="0" step="0.01">
                                </div>
                                <div class="form-text">For reference only, not used in calculations</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="menuItemStatus" class="form-label">Status</label>
                                <select class="form-select" id="menuItemStatus" required>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                            <div class="col-12 mb-3">
                                <label for="menuItemDescription" class="form-label">Description (Optional)</label>
                                <textarea class="form-control" id="menuItemDescription" rows="2"></textarea>
                            </div>
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Assign Ingredients (Recipe)</h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="recipeIngredientsContainer">
                                            <div class="text-center py-3">
                                                <p class="text-muted">No ingredients assigned yet</p>
                                                <button type="button" class="btn btn-sm btn-outline-danger" id="addIngredientToRecipe">
                                                    <i class="fas fa-plus me-1"></i> Add Ingredient
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="saveMenuItemBtn">Save Menu Item</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="addIngredientModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-plus-circle me-2"></i>Add New Ingredient
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addIngredientForm">
                        <div class="mb-3">
                            <label for="ingredientName" class="form-label">Ingredient Name</label>
                            <input type="text" class="form-control" id="ingredientName" required>
                        </div>
                        <div class="mb-3">
                            <label for="ingredientCategory" class="form-label">Category</label>
                            <select class="form-select" id="ingredientCategory" required>
                                <option value="">Select Category</option>
                                <option value="Meat">Meat</option>
                                <option value="Vegetables">Vegetables</option>
                                <option value="Grains">Grains</option>
                                <option value="Spices">Spices</option>
                                <option value="Dairy">Dairy</option>
                                <option value="Seafood">Seafood</option>
                                <option value="Baking">Baking</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="ingredientUnit" class="form-label">Unit of Measurement</label>
                                <select class="form-select" id="ingredientUnit" required>
                                    <option value="kg">Kilograms (kg)</option>
                                    <option value="g">Grams (g)</option>
                                    <option value="pcs">Pieces (pcs)</option>
                                    <option value="liters">Liters (L)</option>
                                    <option value="ml">Milliliters (ml)</option>
                                    <option value="pack">Pack</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lowStockThreshold" class="form-label">Low-stock Threshold</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="lowStockThreshold" min="1" value="5" required>
                                    <span class="input-group-text" id="thresholdUnit">kg</span>
                                </div>
                                <div class="form-text">Alert when quantity falls below this value</div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="saveIngredientBtn">Save Ingredient</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="editUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-user-edit me-2"></i>Edit User
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <input type="hidden" id="editUserId">
                        <div class="mb-3">
                            <label for="editFullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="editFullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editUsername" class="form-label">Username</label>
                            <input type="text" class="form-control" id="editUsername" required>
                        </div>
                        <div class="mb-3">
                            <label for="editUserRole" class="form-label">Role</label>
                            <select class="form-select" id="editUserRole" required>
                                <option value="Staff">Staff</option>
                                <option value="Cashier">Cashier</option>
                                <option value="Senior Staff">Senior Staff</option>
                                <option value="Manager">Manager</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editUserStatus" class="form-label">Account Status</label>
                            <select class="form-select" id="editUserStatus" required>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="Suspended">Suspended</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editUserPassword" class="form-label">Reset Password</label>
                            <input type="password" class="form-control" id="editUserPassword" placeholder="Leave empty to keep current password">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveUserChangesBtn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="addUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-user-plus me-2"></i>Add New User
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="mb-3">
                            <label for="newFullName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="newFullName" required>
                        </div>
                        <div class="mb-3">
                            <label for="newUsername" class="form-label">Username</label>
                            <input type="text" class="form-control" id="newUsername" required>
                        </div>
                        <div class="mb-3">
                            <label for="newUserPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="newUserPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmUserPassword" class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmUserPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="newUserRole" class="form-label">Role</label>
                            <select class="form-select" id="newUserRole" required>
                                <option value="Staff">Staff</option>
                                <option value="Cashier">Cashier</option>
                                <option value="Senior Staff">Senior Staff</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="saveNewUserBtn">Add User</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="approvalModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="approvalModalTitle">
                        <i class="fas fa-check-circle me-2"></i>Approve Request
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="approvalModalContent">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="confirmApproveBtn">Approve</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification Modal -->
    <div class="modal fade" id="notificationModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" id="notificationModalHeader">
                    <h5 class="modal-title" id="notificationModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="notificationModalBody">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="notificationModalConfirm" style="display: none;">Confirm</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery for AJAX -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Chart.js for reports -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom JS -->
    <script src="main.js"></script>
    <script src="admin.js"></script>
    
    <script>
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set current page as active
            updateActivePage('dashboard');
            
            // Load dashboard data
            loadAdminDashboardData();
            
            // Navigation handling
            document.querySelectorAll('[data-page]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    updateActivePage(page);
                });
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                showConfirm('Are you sure you want to logout?', function() {
                    window.location.href = 'index.html';
                });
            });
            
            // Quick actions buttons
            document.querySelectorAll('#dashboard-content .btn[data-page]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    updateActivePage(page);
                });
            });
            
            // Refresh dashboard button
            document.getElementById('refreshAdminDashboard').addEventListener('click', function() {
                loadAdminDashboardData();
                showModalNotification('Dashboard refreshed', 'success');
            });
            
            // Add user button
            document.getElementById('addUserBtn').addEventListener('click', function() {
                showAddUserModal();
            });
        });
        
        function updateActivePage(page) {
            // Hide all page contents
            document.querySelectorAll('.page-content').forEach(content => {
                content.classList.add('d-none');
                content.classList.remove('animate__fadeIn');
            });
            
            // Show selected page content
            const pageContent = document.getElementById(`${page}-content`);
            if (pageContent) {
                pageContent.classList.remove('d-none');
                pageContent.classList.add('animate__animated', 'animate__fadeIn');
                
                // Load page-specific data
                switch(page) {
                    case 'dashboard':
                        loadAdminDashboardData();
                        break;
                    case 'menu-control':
                        loadMenuControl();
                        break;
                    case 'recipe-control':
                        loadRecipeControl();
                        break;
                    case 'ingredients-masterlist':
                        loadIngredientsMasterlist();
                        break;
                    case 'user-management':
                        loadUserManagement();
                        break;
                    case 'reports':
                        initializeReports();
                        break;
                    case 'backup':
                        loadBackupData();
                        break;
                    case 'requests':
                        loadRequests();
                        break;
                    case 'system-settings':
                        loadSystemSettings();
                        break;
                    case 'activity-log':
                        loadFullActivityLog();
                        break;
                    case 'temp-account':
                        loadTempAccountStatus();
                        break;
                }
            }
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelectorAll(`[data-page="${page}"]`).forEach(link => {
                link.classList.add('active');
            });
            
            // Update active dropdown parent if needed
            if (page === 'menu-control' || page === 'recipe-control') {
                document.querySelector('[href="#"][data-bs-toggle="dropdown"]').classList.add('active');
            }
        }
        
        function loadAdminDashboardData() {
            // Simulate AJAX loading
            setTimeout(() => {
                // Update info boxes (swapped colors as requested)
                document.getElementById('ingredientsRestock').textContent = '3';
                document.getElementById('totalStaffAccounts').textContent = '8';
                document.getElementById('totalSalesRecords').textContent = '156';
                document.getElementById('systemAlerts').textContent = '2';
                
                // Populate low stock table
                const lowStockData = [
                    { name: 'Chicken', category: 'Meat', quantity: '8 kg', threshold: '10 kg', status: 'Low' },
                    { name: 'Onions', category: 'Vegetables', quantity: '3 kg', threshold: '5 kg', status: 'Low' },
                    { name: 'Cheese', category: 'Dairy', quantity: '4 kg', threshold: '3 kg', status: 'Low' }
                ];
                
                const lowStockTable = document.getElementById('lowStockTable').getElementsByTagName('tbody')[0];
                lowStockTable.innerHTML = '';
                
                lowStockData.forEach(item => {
                    const row = lowStockTable.insertRow();
                    row.innerHTML = `
                        <td><strong>${item.name}</strong></td>
                        <td><span class="badge bg-secondary">${item.category}</span></td>
                        <td>${item.quantity}</td>
                        <td>${item.threshold}</td>
                        <td><span class="badge bg-warning">${item.status}</span></td>
                    `;
                });
                
                // Populate recent activities
                const recentActivities = [
                    { time: '10:30 AM', user: 'John Doe', action: 'Recorded sale', status: 'success' },
                    { time: '09:45 AM', user: 'System', action: 'Low stock alert generated', status: 'warning' },
                    { time: '09:15 AM', user: 'Admin', action: 'Approved new staff account', status: 'success' },
                    { time: 'Yesterday', user: 'Jane Smith', action: 'Updated ingredient quantities', status: 'success' },
                    { time: 'Yesterday', user: 'System', action: 'Daily backup completed', status: 'info' }
                ];
                
                const activitiesContainer = document.getElementById('recentActivities');
                activitiesContainer.innerHTML = '';
                
                recentActivities.forEach(activity => {
                    const activityItem = document.createElement('div');
                    activityItem.className = 'activity-item';
                    activityItem.innerHTML = `
                        <div class="d-flex">
                            <div class="activity-icon me-3">
                                <i class="fas fa-circle text-${activity.status}"></i>
                            </div>
                            <div class="activity-content flex-grow-1">
                                <div class="d-flex justify-content-between">
                                    <strong>${activity.action}</strong>
                                    <small class="text-muted">${activity.time}</small>
                                </div>
                                <small class="text-muted">by ${activity.user}</small>
                            </div>
                        </div>
                    `;
                    activitiesContainer.appendChild(activityItem);
                });
            }, 500);
        }
        
        function loadUserManagement() {
            // Load active users
            loadActiveUsers();
            
            // Load deleted users
            loadDeletedUsers();
        }
        
        function loadActiveUsers() {
            const activeUsersTable = document.getElementById('activeUsersTable').getElementsByTagName('tbody')[0];
            activeUsersTable.innerHTML = '<tr><td colspan="6" class="text-center"><div class="loading-spinner"></div><p class="mt-2">Loading active users...</p></td></tr>';
            
            setTimeout(() => {
                const users = [
                    { name: 'John Doe', role: 'Staff', username: 'johndoe', status: 'Active', lastLogin: 'Today', actions: '<button class="btn btn-sm btn-primary me-1" onclick="editUser(1)">Edit</button><button class="btn btn-sm btn-danger" onclick="deleteUser(1)">Delete</button>' },
                    { name: 'Jane Smith', role: 'Cashier', username: 'janesmith', status: 'Active', lastLogin: 'Today', actions: '<button class="btn btn-sm btn-primary me-1" onclick="editUser(2)">Edit</button><button class="btn btn-sm btn-danger" onclick="deleteUser(2)">Delete</button>' },
                    { name: 'Robert Johnson', role: 'Staff', username: 'robertj', status: 'Active', lastLogin: 'Yesterday', actions: '<button class="btn btn-sm btn-primary me-1" onclick="editUser(3)">Edit</button><button class="btn btn-sm btn-danger" onclick="deleteUser(3)">Delete</button>' },
                    { name: 'Sarah Williams', role: 'Senior Staff', username: 'sarahw', status: 'Active', lastLogin: 'Today', actions: '<button class="btn btn-sm btn-primary me-1" onclick="editUser(4)">Edit</button><button class="btn btn-sm btn-danger" onclick="deleteUser(4)">Delete</button>' }
                ];
                
                activeUsersTable.innerHTML = '';
                
                users.forEach(user => {
                    const row = activeUsersTable.insertRow();
                    row.innerHTML = `
                        <td><strong>${user.name}</strong></td>
                        <td><span class="badge ${user.role === 'Staff' ? 'bg-success' : user.role === 'Cashier' ? 'bg-info' : 'bg-warning'}">${user.role}</span></td>
                        <td>${user.username}</td>
                        <td><span class="badge bg-success">${user.status}</span></td>
                        <td>${user.lastLogin}</td>
                        <td>${user.actions}</td>
                    `;
                });
            }, 800);
        }
        
        function loadDeletedUsers() {
            const deletedUsersTable = document.getElementById('deletedUsersTable').getElementsByTagName('tbody')[0];
            const deletedUsersCount = document.getElementById('deletedUsersCount');
            
            setTimeout(() => {
                const deletedUsers = [
                    { name: 'Mike Brown', role: 'Staff', username: 'mikeb', deletedDate: '2023-09-28', deletedBy: 'Admin', actions: '<button class="btn btn-sm btn-success me-1" onclick="restoreUser(1)">Restore</button><button class="btn btn-sm btn-danger" onclick="permanentlyDeleteUser(1)">Permanently Delete</button>' },
                    { name: 'Emily Davis', role: 'Cashier', username: 'emilyd', deletedDate: '2023-09-25', deletedBy: 'Admin', actions: '<button class="btn btn-sm btn-success me-1" onclick="restoreUser(2)">Restore</button><button class="btn btn-sm btn-danger" onclick="permanentlyDeleteUser(2)">Permanently Delete</button>' }
                ];
                
                deletedUsersTable.innerHTML = '';
                
                deletedUsers.forEach(user => {
                    const row = deletedUsersTable.insertRow();
                    row.innerHTML = `
                        <td><strong>${user.name}</strong></td>
                        <td><span class="badge bg-secondary">${user.role}</span></td>
                        <td>${user.username}</td>
                        <td>${user.deletedDate}</td>
                        <td>${user.deletedBy}</td>
                        <td>${user.actions}</td>
                    `;
                });
                
                // Update count
                if (deletedUsersCount) {
                    deletedUsersCount.textContent = deletedUsers.length;
                }
            }, 800);
        }
        
        function showAddUserModal() {
            // Clear form
            document.getElementById('addUserForm').reset();
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('addUserModal'));
            modal.show();
            
            // Save new user button
            document.getElementById('saveNewUserBtn').addEventListener('click', function() {
                saveNewUser();
            });
        }
        
        function saveNewUser() {
            const fullName = document.getElementById('newFullName').value;
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newUserPassword').value;
            const confirmPassword = document.getElementById('confirmUserPassword').value;
            const role = document.getElementById('newUserRole').value;
            
            // Validation
            if (!fullName || !username || !password || !confirmPassword) {
                showModalNotification('Please fill in all required fields', 'warning');
                return;
            }
            
            if (password !== confirmPassword) {
                showModalNotification('Passwords do not match', 'warning');
                return;
            }
            
            if (password.length < 6) {
                showModalNotification('Password must be at least 6 characters', 'warning');
                return;
            }
            
            // Simulate save
            setTimeout(() => {
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('addUserModal'));
                modal.hide();
                
                // Show success message
                showModalNotification(`User "${fullName}" added successfully`, 'success');
                
                // Refresh user list
                loadActiveUsers();
            }, 1000);
        }
        
        function editUser(userId) {
            // Simulate loading user data
            const userData = {
                id: userId,
                fullName: 'John Doe',
                username: 'johndoe',
                role: 'Staff',
                status: 'Active'
            };
            
            // Populate form
            document.getElementById('editUserId').value = userData.id;
            document.getElementById('editFullName').value = userData.fullName;
            document.getElementById('editUsername').value = userData.username;
            document.getElementById('editUserRole').value = userData.role;
            document.getElementById('editUserStatus').value = userData.status;
            document.getElementById('editUserPassword').value = '';
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('editUserModal'));
            modal.show();
            
            // Save changes button
            document.getElementById('saveUserChangesBtn').addEventListener('click', function() {
                saveUserChanges(userId);
            });
        }
        
        function saveUserChanges(userId) {
            const fullName = document.getElementById('editFullName').value;
            const username = document.getElementById('editUsername').value;
            const role = document.getElementById('editUserRole').value;
            const status = document.getElementById('editUserStatus').value;
            const password = document.getElementById('editUserPassword').value;
            
            if (!fullName || !username) {
                showModalNotification('Please fill in all required fields', 'warning');
                return;
            }
            
            // Simulate save
            setTimeout(() => {
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('editUserModal'));
                modal.hide();
                
                // Show success message
                let message = `User "${fullName}" updated successfully`;
                if (password) {
                    message += ' (password reset)';
                }
                
                showModalNotification(message, 'success');
                
                // Refresh user list
                loadActiveUsers();
            }, 1000);
        }
        
        function deleteUser(userId) {
            showConfirm('Are you sure you want to delete this user? The user will be moved to the deleted users table where they can be restored.', function() {
                // Simulate delete
                setTimeout(() => {
                    showModalNotification('User moved to deleted users table', 'success');
                    
                    // Refresh both tables
                    loadActiveUsers();
                    loadDeletedUsers();
                }, 800);
            });
        }
        
        function restoreUser(userId) {
            showConfirm('Are you sure you want to restore this user?', function() {
                // Simulate restore
                setTimeout(() => {
                    showModalNotification('User restored successfully', 'success');
                    
                    // Refresh both tables
                    loadActiveUsers();
                    loadDeletedUsers();
                }, 800);
            });
        }
        
        function permanentlyDeleteUser(userId) {
            showConfirm('Are you sure you want to permanently delete this user? This action cannot be undone.', function() {
                // Simulate permanent delete
                setTimeout(() => {
                    showModalNotification('User permanently deleted', 'success');
                    
                    // Refresh deleted users table
                    loadDeletedUsers();
                }, 800);
            });
        }
        
        function showModalNotification(message, type = 'info', title = 'Notification') {
            const modalHeader = document.getElementById('notificationModalHeader');
            const modalTitle = document.getElementById('notificationModalTitle');
            const modalBody = document.getElementById('notificationModalBody');
            
            // Set modal color based on type
            let headerClass = 'bg-primary text-white';
            switch(type) {
                case 'success':
                    headerClass = 'bg-success text-white';
                    break;
                case 'warning':
                    headerClass = 'bg-warning text-dark';
                    break;
                case 'danger':
                    headerClass = 'bg-danger text-white';
                    break;
                case 'info':
                    headerClass = 'bg-info text-white';
                    break;
            }
            
            modalHeader.className = `modal-header ${headerClass}`;
            modalTitle.textContent = title;
            modalBody.textContent = message;
            
            // Hide confirm button for regular notifications
            document.getElementById('notificationModalConfirm').style.display = 'none';
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('notificationModal'));
            modal.show();
        }
        
        // Export functions for use in admin.js
        window.editUser = editUser;
        window.deleteUser = deleteUser;
        window.restoreUser = restoreUser;
        window.permanentlyDeleteUser = permanentlyDeleteUser;
    </script>
</body>
</html>